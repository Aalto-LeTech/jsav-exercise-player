<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Visual Algorithm Simulation Player</title>

  <!-- The <head> section loads the same necessary CSS and JavaScript than
  the A+ LMS. Reference:
  https://github.com/apluslms/a-plus/blob/master/templates/base.html -->

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../styles/JSAV.css" type="text/css" />
  <link rel="stylesheet" href="../styles/odsaAV-min.css" type="text/css" />
  <link rel="stylesheet" href="../styles/exercise-player.css" type="text/css" />
  <link rel="stylesheet" href="../styles/aplus-main.css" type="text/css" />

  <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
  <script src="../lib/jquery-ui.min.js"></script>
  <script src="../lib/jquery.transit.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="../lib/raphael.js"></script>
  <script src="../lib/JSAV-min.js"></script>

  <style type="text/css">
  #main-aplus-text {
    width: 70ex;
  }
  </style>

</head>
<body>

<div id="main-aplus-text">

<p>This is a standalone JSAV Exercise Player for test purposes. This HTML file
contains an exercise recording of the Insertion sort JSAV exercise.</p>

<button type="button" id="show-aplus-modal">Show A+ modal</button>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur justo
dui, volutpat sed sem et, imperdiet efficitur ligula. Nam rhoncus vulputate
augue vel condimentum. Nam rhoncus sapien quis augue ultrices, eu placerat
sapien mattis. Quisque mattis aliquam mi, sed luctus purus luctus fermentum.
Suspendisse at velit in ex aliquam tempor id nec lacus. Sed consectetur eu
turpis nec congue. Nullam congue nisl in urna ultricies aliquam. Sed ut libero
eu urna faucibus placerat. Orci varius natoque penatibus et magnis dis
parturient montes, nascetur ridiculus mus. Donec sed suscipit quam, sed
accumsan nisi.</p>

<p>Nullam interdum tincidunt tortor, in consectetur turpis tincidunt et. Duis
non tempus ante. Ut et dolor et tortor porta condimentum. Suspendisse id
ligula quis neque pellentesque finibus eu nec turpis. Duis ac dictum tellus,
tempor tincidunt justo. Donec finibus consequat ex, id porta augue ornare vel.
Praesent consequat ultricies lectus, at pharetra orci pharetra vel. Phasellus
gravida lorem eget odio egestas aliquam. Praesent ex tellus, convallis vitae
cursus et, ornare nec eros. Vestibulum et velit sed neque mattis iaculis eu
non ipsum. Quisque id porttitor eros. Maecenas maximus lobortis ante id
mattis. Pellentesque blandit pulvinar massa. Etiam vel massa vitae ligula
tempor maximus sit amet eget ipsum. Ut purus mi, dignissim sit amet convallis
dignissim, gravida a lorem.</p>

<p>Suspendisse potenti. Proin laoreet sollicitudin euismod. Nunc eleifend et erat
sit amet consectetur. Maecenas rhoncus eros sit amet turpis rutrum vestibulum.
Phasellus lorem tellus, semper quis gravida eu, suscipit nec nisl. Nulla
sagittis, eros nec molestie hendrerit, dui lacus mollis nisl, eu ornare justo
libero et justo. Sed quis tortor arcu. Quisque sit amet elit ultrices dolor
molestie sollicitudin. Nulla accumsan ligula non mi vestibulum, ut interdum
magna tristique. In ultrices, est et dignissim lacinia, felis nisi luctus nisl,
ut luctus felis dui quis quam. Fusce consequat pretium quam efficitur aliquet.
Etiam elit urna, blandit et sollicitudin sed, posuere vitae urna. Sed
pellentesque fringilla enim a vulputate.</p>

<p>Cras semper purus eu velit placerat, eu facilisis ante facilisis. Vestibulum
a venenatis purus. Praesent hendrerit et enim eu volutpat. Vivamus sagittis
porttitor ex, a facilisis nisl pulvinar auctor. Donec vitae convallis augue.
Donec condimentum bibendum magna, quis sagittis orci dapibus vitae. Praesent
maximus nisl a quam sodales, eu lacinia orci sollicitudin. Ut posuere, risus
eget venenatis imperdiet, sem ex congue diam, sit amet laoreet sem elit at est.
Nunc ac efficitur purus. Morbi tristique orci quis sagittis finibus. Mauris
lobortis nisl a urna ullamcorper dapibus. Maecenas pulvinar vulputate viverra.
Curabitur pretium vehicula purus, at placerat dui consequat ut. Fusce vel nisl
lobortis, consectetur turpis vel, facilisis neque. Quisque rhoncus lorem a augue
lacinia, ac congue sem blandit. Vivamus varius justo vel facilisis faucibus.</p>

<p>Nulla pretium eleifend lacus, ut feugiat odio aliquam quis. Integer luctus
risus odio, at venenatis tellus condimentum vitae. Etiam at venenatis ex, a
elementum justo. Curabitur dignissim nisl sed risus faucibus, non euismod massa
fermentum. Morbi vulputate, erat vitae consectetur finibus, nulla mauris mattis
dui, eget rutrum metus dolor quis arcu. Sed at turpis urna. Etiam vulputate
porttitor urna a bibendum.</p>

</div>

<script>
$('#show-aplus-modal').click(toggleAplusModal);
$('#close-aplus-modal').on('click', toggleAplusModal);

function toggleAplusModal() {
  console.log('toggleAplusModal clicked!');
  const modal = $('#page-modal');
  if (modal.css('display') === 'none') {
    modal.css('display', 'block');
  }
  else {
    modal.css('display', 'none');
  }
}
</script>

<div id="page-modal" class="modal in" role="dialog" style="display: none; padding-right: 10px;">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-progress" style="display: none;">
        <div class="progress">
          <div class="progress-bar progress-bar-striped active" role="progressbar" style="width:100%" data-msg-error="Loading failed!">
            Loading...
          </div>
        </div>
      </div>
      <div class="modal-body" style="display: block;">
        <p class="submission-title">5.3 Mergesort: 5.3.1 Mergesort</p>
        <table class="submission-info table table-bordered table-condensed">
          <tbody><tr><th>Date</th><th>Points</th><th>Course staff</th></tr>
          <tr>
            <td>Fri, Jun 26 2020, 4:42 p.m.</td>
            <td class="points-badge"><span class="hidden">
              <span class="difficulty">A</span>
              <span class="badge badge-warning" data-toggle="tooltip" data-placement="bottom" title="">
              0 / 200
              </span>
              </span>
              <span class="difficulty">A</span>
              <span class="badge badge-warning" data-toggle="tooltip" data-placement="bottom" title="">
              0 / 200
              </span>
            </td>
            <td>
              <a href="/a1141/2020/jarjestaminen/mergesort/mergesort_ex/submissions/2915681/inspect/" class="btn btn-default btn-xs">
  						<span class="glyphicon glyphicon-zoom-in" aria-hidden="true"></span>
  						Inspect
    					</a>
            </td>
          </tr>
          </tbody>
        </table>
        <div id="exercise-all">
          <div class="exercise-content">
            Sait 0/34 pistett√§ vastauksestasi.
<button type="button" id="show-player">Show player</button>

<!-- <div id="jaalPlayerModal" class="jaalModal"> -->
  <div id="jaalPlayerModal" class="jaalModalContent">
  <span class="jaal-close" id="close-player-modal">&times;</span>


  <div class="player-controls">
    <div class="view-control">
      <button type="button" id="compare-view-button" disabled="" >Compare with model answer</button>
      <button type="button" id="detailed-view-button" >See all submission actions</button>
    </div>
    <div class="speed-control">
      <label for="speed">Animation Speed:</label>
      <input type="range" id="speed" name="speed" value="-1000" step="200" min="-2000" max="-200">
      <button id="jaal">JAAL</button>
      <button id="export">Export</button>
    </div>
  </div>

  <div class="compare-view">
    <div class="view-control">
      <div class="auto-animation">
        <button class="animation-button animation-play-pause" id="compare-view-play-pause-button"></button>
        <button class="animation-button animation-stop" id="compare-view-stop-button"></button>
      </div>
      <div class="slide-show">
        <button id="compare-view-to-beginning">&lt;&lt;</button>
        <button id="compare-view-step-backward">&lt;</button>
        <button id="compare-view-step-forward">&gt;</button>
        <button id="compare-view-to-end">&gt;&gt;</button>
      </div>
    </div>
  </div>

  <div class="detailed-view" style="display: none">
      <h4>In this mode you can see all the click actions and if the model answer was opened</h4>
  </div>

  <!-- Student's answer view -->
  <div class="views-container">
    <div class="animation-view">
      <div class="view-control">
        <div class="auto-animation">
          <button class="animation-button animation-play-pause" id="play-pause-button"></button>
          <button class="animation-button animation-stop" id="stop-button"></button>
        </div>
        <div class="slide-show">
          <button id="to-beginning">&lt;&lt;</button>
          <button id="step-backward">&lt;</button>
          <button id="step-forward">&gt;</button>
          <button id="to-end">&gt;&gt;</button>
        </div>
      </div>
      <div id="animation-container"></div>
    </div>

    <!-- Model answer view -->
    <div class="model-answer-view">
      <div class="view-control">
        <div class="auto-animation">
          <button class="animation-button animation-play-pause" id="model-answer-play-pause-button"></button>
          <button class="animation-button animation-stop" id="model-answer-stop-button"></button>
        </div>
        <div class="slide-show">
          <button id="model-answer-to-beginning">&lt;&lt;</button>
          <button id="model-answer-step-backward">&lt;</button>
          <button id="model-answer-step-forward">&gt;</button>
          <button id="model-answer-to-end">&gt;&gt;</button>
        </div>
      </div>
      <div id="model-answer-container" class="jsavcanvas"></div>
    </div>
  </div>

  <!-- JSON tree view for JAAL data -->
  <div id="jaalTreeModal" class="jaalModal">
    <div class="jaalModalContent">
      <div>
        <span class="jaal-close" id="jaalTreeModal-close">&times;</span>
      </div>
      <div>
        <p>JSON Algorithm Animation Language (JAAL) viewer</p>
        <label for="html-to-string">Display JAAL HTML content as string</label>
        <input type="checkbox" id="html-to-string" value="">
        <button type="button" id="show-jaal">Show</button>
        <div id="jaalTreeContent"></div>
      </div>
    </div>
  </div>

</div> <!-- .jaalModalContent -->
<!-- </div> --> <!-- #jaalPlayerModal -->
</div>
</div>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal" id="close-aplus-modal">
Close
</button>
</div>
</div>
</div>
</div>

<script type="text/javascript">
// The following is a base64 encoded and stringified JSON data.
// It contains a recording of the Insertion sort JSAV exercise in JAAL format.

const submission =
JSON.parse(atob("eyJtZXRhZGF0YSI6eyJtYXhfcG9pbnRzIjoiMTAwIiwidWlkIjowLCJvcmRpbmFsX251bWJlciI6MH0sImRlZmluaXRpb25zIjp7InN0eWxlIjp7fSwic2NvcmUiOnsidG90YWwiOjQ3LCJjb3JyZWN0Ijo2LCJ1bmRvIjowLCJmaXgiOjAsInN0dWRlbnQiOjZ9LCJvcHRpb25zIjp7InRpdGxlIjoiTGlz5HlzauRyamVzdORtaW5lbiIsImluc3RydWN0aW9ucyI6IlNvdmVsbGEgbGlz5HlzauRyamVzdORtaXN05CAoaW5zZXJ0aW9uIHNvcnQpIG9oZWlzZWVuIHRhdWx1a2tvb24uIEFydm9qYSB2b2kga29waW9pZGEgcGFpa2FzdGEgdG9pc2VlbiBrbGlra2FhbWFsbGEuIn0sIm1vZGVsQW5zd2VyIjp7ImZ1bmN0aW9uIjoiXCJmdW5jdGlvbiBtb2RlbFNvbHV0aW9uKGpzYXYpIHtcXG4gICAgdmFyIGpzYXZJID0ganNhdi52YXJpYWJsZSgxLCB7bGFiZWw6IFxcXCJpOlxcXCIsIHZpc2libGU6IHRydWUsIGxlZnQ6IDEwfSk7XFxuICAgIHZhciBqc2F2SiA9IGpzYXYudmFyaWFibGUoMCwge2xhYmVsOiBcXFwiajpcXFwiLCB2aXNpYmxlOiB0cnVlLCBsZWZ0OiAxMCwgdG9wOiA2MH0pO1xcblxcbiAgICB2YXIgbW9kZWxBcnJheSA9IGpzYXYuZHMuYXJyYXkoaW5pdGlhbEFycmF5LCB7aW5kZXhlZDogdHJ1ZSwgbGF5b3V0OiBcXFwiYmFyXFxcIn0pO1xcbiAgICB2YXIgbW9kZWxUZW1wQXJyYXkgPSBqc2F2LmRzLmFycmF5KGluaXRpYWxUZW1wQXJyYXkpO1xcblxcbiAgICBqc2F2Ll91bmRvID0gW107XFxuICAgIG1vZGVsQXJyYXkubGF5b3V0KCk7XFxuXFxuICAgIHZhciBtc0NvZGU7XFxuICAgIGlmIChjb25maWcuY29kZSkge1xcbiAgICAgIG1zQ29kZSA9IGpzYXYuY29kZShjb25maWcuY29kZSkuc2hvdygpO1xcbiAgICB9XFxuXFxuICAgIGpzYXYuZGlzcGxheUluaXQoKTtcXG5cXG4gICAgdmFyIGogPSAwO1xcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFycmF5U2l6ZTsgaSsrKSB7XFxuICAgICAganNhdkkudmFsdWUoaSk7XFxuICAgICAganNhdi5lZmZlY3RzLmNvcHlWYWx1ZShtb2RlbEFycmF5LCBpLCBtb2RlbFRlbXBBcnJheSwgMCk7XFxuICAgICAganNhdi51bXNnKGludGVycHJldChcXFwiYXZfbXNfY29weVxcXCIpLCB7ZmlsbDoge2Fycl9hdF9pOiBtb2RlbEFycmF5LnZhbHVlKGkpfX0pO1xcbiAgICAgIGlmIChjb25maWcuY29kZSkge1xcbiAgICAgICAgbXNDb2RlLnNldEN1cnJlbnRMaW5lKGNvbmZpZy5jb2RlLnRhZ3MuY29weV90b190bXApO1xcbiAgICAgIH1cXG4gICAgICBqc2F2LnN0ZXBPcHRpb24oXFxcImdyYWRlXFxcIiwgdHJ1ZSk7XFxuICAgICAganNhdi5zdGVwKCk7XFxuICAgICAgaiA9IGk7XFxuICAgICAganNhdkoudmFsdWUoaik7XFxuICAgICAgd2hpbGUgKGogPiAwICYmIG1vZGVsQXJyYXkudmFsdWUoaiAtIDEpID4gbW9kZWxUZW1wQXJyYXkudmFsdWUoMCkpIHtcXG4gICAgICAgIGpzYXYuZWZmZWN0cy5jb3B5VmFsdWUobW9kZWxBcnJheSwgaiAtIDEsIG1vZGVsQXJyYXksIGopO1xcbiAgICAgICAgbW9kZWxBcnJheS5sYXlvdXQoKTtcXG4gICAgICAgIGpzYXYudW1zZyhpbnRlcnByZXQoXFxcImF2X21zX3NoaWZ0XFxcIiksIHtmaWxsOiB7dGVtcDogbW9kZWxUZW1wQXJyYXkudmFsdWUoMCksIGk6IGl9fSk7XFxuICAgICAgICBpZiAoY29uZmlnLmNvZGUpIHtcXG4gICAgICAgICAgbXNDb2RlLnNldEN1cnJlbnRMaW5lKGNvbmZpZy5jb2RlLnRhZ3Muc2hpZnQpO1xcbiAgICAgICAgfVxcbiAgICAgICAganNhdi5zdGVwT3B0aW9uKFxcXCJncmFkZVxcXCIsIHRydWUpO1xcbiAgICAgICAganNhdi5zdGVwKCk7XFxuICAgICAgICBqLS07XFxuICAgICAgICBqc2F2Si52YWx1ZShqKTtcXG4gICAgICB9XFxuICAgICAganNhdi5lZmZlY3RzLmNvcHlWYWx1ZShtb2RlbFRlbXBBcnJheSwgMCwgbW9kZWxBcnJheSwgaik7XFxuICAgICAgbW9kZWxBcnJheS5sYXlvdXQoKTtcXG4gICAgICBqc2F2LnVtc2coaW50ZXJwcmV0KFxcXCJhdl9tc19jb3B5X2JhY2tcXFwiKSwge2ZpbGw6IHt0ZW1wOiBtb2RlbFRlbXBBcnJheS52YWx1ZSgwKSwgaTogaX19KTtcXG4gICAgICBpZiAoY29uZmlnLmNvZGUpIHtcXG4gICAgICAgIG1zQ29kZS5zZXRDdXJyZW50TGluZShjb25maWcuY29kZS50YWdzLmNvcHlfYmFjayk7XFxuICAgICAgfVxcbiAgICAgIGpzYXYuc3RlcE9wdGlvbihcXFwiZ3JhZGVcXFwiLCB0cnVlKTtcXG4gICAgICBqc2F2LnN0ZXAoKTtcXG4gICAgfVxcblxcbiAgICByZXR1cm4gW21vZGVsQXJyYXksIG1vZGVsVGVtcEFycmF5XTtcXG4gIH1cIiIsInN0ZXBzIjpbeyJkYXRhU3RydWN0dXJlcyI6W1s0NCw4MCw0MSwyOCw5OSwzOCwyNCwxNCw4NiwyOV0sWzE1XV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6MX0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJLb3Bpb2kge2Fycl9hdF9pfSB0YXVsdWtvc3RhIHRlbXAtbXV1dHR1amFhbi4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjMsIjEiOiJqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMSAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxzcGFuPjwvc3Bhbj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMVwiPjE8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMFwiPjA8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTU8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1s0NCw4MCw0MSwyOCw5OSwzOCwyNCwxNCw4NiwyOV0sWzgwXV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6MX0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIHt0ZW1wfSB0ZW1wLW11dXR0dWphc3RhIHRhdWx1a2tvb24gb2lrZWFsbGUgcGFpa2FsbGUuIFRhdWx1a2tvIG9uIG55dCBq5HJqZXN0ZXR0eSBub2xsYW4gamEge2l9Om4gduRsaWxs5C4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjMsIjEiOiJqc2F2cHJldmlvdXNsaW5lIGpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6OCwiMSI6ImpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIyIC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPktvcGlvaSA4MCB0YXVsdWtvc3RhIHRlbXAtbXV1dHR1amFhbi48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMVwiPjE8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMFwiPjA8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbNDQsODAsNDEsMjgsOTksMzgsMjQsMTQsODYsMjldLFs4MF1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjJ9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiS29waW9pIHthcnJfYXRfaX0gdGF1bHVrb3N0YSB0ZW1wLW11dXR0dWphYW4uIiwiMSI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG1zZywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlsbCAmJiB0eXBlb2Ygb3B0aW9ucy5maWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyByZXBsYWNlIHRoZSBsYWJlbHMgaW4gdGhlIHN0cmluZyBpZiB0aGUgcmVwbGFjZW1lbnRzIGFyZSBnaXZlbiBpbiB0aGUgb3B0aW9uc1xuICAgICAgbXNnID0gSlNBVi51dGlscy5yZXBsYWNlTGFiZWxzKG1zZywgb3B0aW9ucy5maWxsKTtcbiAgICB9XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7Y29sb3I6IFwiYmxhY2tcIiwgcHJlc2VydmU6IGZhbHNlfSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMub3V0cHV0KSB7XG4gICAgICBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSAmJiBvcHRzLnByZXNlcnZlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMub3V0cHV0LmZpbmQoXCJkaXY6bGFzdFwiKSxcbiAgICAgICAgICBuZXdtc2cgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmIChlbC5zaXplKCkgPiAwKSB7IC8vIGV4aXN0aW5nIGNvbnRlbnQgaW4gbWVzc2FnZSBvdXRwdXRcbiAgICAgICAgICBlbC5hcHBlbmQobmV3bXNnKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3QgbWVzc2FnZVxuICAgICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSkge1xuICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgLy99IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdnNjcm9sbFwiKSkge1xuICAgICAgfSBlbHNlIHsgLy8gZS5nLiBcImpzYXZzY3JvbGxcIiwgd2hpY2ggaXMgZGVmYXVsdFxuICAgICAgICB0aGlzLm91dHB1dC5hcHBlbmQoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFswXSkge1xuICAgICAgICAgIHRoaXMub3V0cHV0WzBdLnNjcm9sbFRvcCA9IHRoaXMub3V0cHV0WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuanNhdi5SRUNPUkQpIHsgLy8gdHJpZ2dlciBldmVudHMgb25seSBpZiBub3QgcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuY29udGFpbmVyLnRyaWdnZXIoXCJqc2F2LW1lc3NhZ2VcIiwgW21zZywgb3B0aW9uc10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSJ9LHsiYXJncyI6eyIwIjozLCIxIjoianNhdnByZXZpb3VzbGluZSBqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjgsIjEiOiJqc2F2cHJldmlvdXNsaW5lIGpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIzIC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPlNpaXJy5CA4MCB0ZW1wLW11dXR0dWphc3RhIHRhdWx1a2tvb24gb2lrZWFsbGUgcGFpa2FsbGUuIFRhdWx1a2tvIG9uIG55dCBq5HJqZXN0ZXR0eSBub2xsYW4gamEgMTpuIHbkbGlsbOQuPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjFcIj4xPC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjFcIj4xPC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbNDQsODAsNDEsMjgsOTksMzgsMjQsMTQsODYsMjldLFs0MV1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjJ9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjoxMDV9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjgsIjEiOiJqc2F2cHJldmlvdXNsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjozLCIxIjoianNhdnByZXZpb3VzbGluZSBqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjYsIjEiOiJqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiNCAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5Lb3Bpb2kgNDEgdGF1bHVrb3N0YSB0ZW1wLW11dXR0dWphYW4uPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjJcIj4yPC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjFcIj4xPC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbNDQsODAsODAsMjgsOTksMzgsMjQsMTQsODYsMjldLFs0MV1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjF9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjo1OH0sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiB7dGVtcH0gKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4ge2l9IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifSx7ImFyZ3MiOnsiMCI6MywiMSI6ImpzYXZwcmV2aW91c2xpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjYsIjEiOiJqc2F2cHJldmlvdXNsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9XSwiaHRtbCI6eyJjb3VudGVySFRNTCI6IjUgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiA0MSAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiAyIChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIyXCI+Mjwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIyXCI+Mjwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1s0NCw0NCw4MCwyOCw5OSwzOCwyNCwxNCw4NiwyOV0sWzQxXV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6MH0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSIsIjEiOjU0fSwiZWZmZWN0IjoiZnVuY3Rpb24oZWxlbSwgbmV3SGVpZ2h0LCBvcHRpb25zKSB7XG4gICAgICAvLyB0aGUgSlNBVi5hbmltIHdyYXBwZXIgd2lsbCBtYWtlIHN1cmUgdGhpcyBwb2ludHMgdG8ganNhdiBpbnN0YW5jZVxuICAgICAgdmFyIG9sZEhlaWdodCA9IGVsZW0uaGVpZ2h0KCk7XG4gICAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbihlbGVtLCB7aGVpZ2h0OiBuZXdIZWlnaHR9LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0uY3NzKHtoZWlnaHQ6IG5ld0hlaWdodH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtlbGVtLCBvbGRIZWlnaHRdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGNzc3Byb3BzLCBvcHRpb25zKSB7XG4gICAgdmFyIG9sZFByb3BzID0gJC5leHRlbmQodHJ1ZSwge30sIGNzc3Byb3BzKSxcbiAgICAgICAgZWwgPSB0aGlzLmVsZW1lbnQ7XG4gICAgaWYgKHR5cGVvZiBjc3Nwcm9wcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIFtjc3Nwcm9wc107XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgaW4gY3NzcHJvcHMpIHtcbiAgICAgICAgaWYgKGNzc3Byb3BzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgb2xkUHJvcHNbaV0gPSBlbC5jc3MoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7IC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbih0aGlzLmVsZW1lbnQsIGNzc3Byb3BzLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LmNzcyhjc3Nwcm9wcyk7XG4gICAgfVxuICAgIHJldHVybiBbb2xkUHJvcHNdO1xuICB9In0seyJhcmdzIjp7IjAiOiJTaWlycuQge3RlbXB9IHRlbXAtbXV1dHR1amFzdGEgdGF1bHVra29vbiBvaWtlYWxsZSBwYWlrYWxsZS4gVGF1bHVra28gb24gbnl0IGrkcmplc3RldHR5IG5vbGxhbiBqYSB7aX06biB25GxpbGzkLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifSx7ImFyZ3MiOnsiMCI6NiwiMSI6ImpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6OCwiMSI6ImpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiI2IC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4gNDEgKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4gMiAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMlwiPjI8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMVwiPjE8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1s0MSw0NCw4MCwyOCw5OSwzOCwyNCwxNCw4NiwyOV0sWzQxXV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6M30sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJLb3Bpb2kge2Fycl9hdF9pfSB0YXVsdWtvc3RhIHRlbXAtbXV1dHR1amFhbi4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjYsIjEiOiJqc2F2cHJldmlvdXNsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo4LCIxIjoianNhdnByZXZpb3VzbGluZSBqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjMsIjEiOiJqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiNyAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQgNDEgdGVtcC1tdXV0dHVqYXN0YSB0YXVsdWtrb29uIG9pa2VhbGxlIHBhaWthbGxlLiBUYXVsdWtrbyBvbiBueXQgauRyamVzdGV0dHkgbm9sbGFuIGphIDI6biB25GxpbGzkLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIyXCI+Mjwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIwXCI+MDwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzQxLDQ0LDgwLDI4LDk5LDM4LDI0LDE0LDg2LDI5XSxbMjhdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjozfSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6MTA1fSwiZWZmZWN0IjoiZnVuY3Rpb24oZWxlbSwgbmV3SGVpZ2h0LCBvcHRpb25zKSB7XG4gICAgICAvLyB0aGUgSlNBVi5hbmltIHdyYXBwZXIgd2lsbCBtYWtlIHN1cmUgdGhpcyBwb2ludHMgdG8ganNhdiBpbnN0YW5jZVxuICAgICAgdmFyIG9sZEhlaWdodCA9IGVsZW0uaGVpZ2h0KCk7XG4gICAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbihlbGVtLCB7aGVpZ2h0OiBuZXdIZWlnaHR9LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0uY3NzKHtoZWlnaHQ6IG5ld0hlaWdodH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtlbGVtLCBvbGRIZWlnaHRdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGNzc3Byb3BzLCBvcHRpb25zKSB7XG4gICAgdmFyIG9sZFByb3BzID0gJC5leHRlbmQodHJ1ZSwge30sIGNzc3Byb3BzKSxcbiAgICAgICAgZWwgPSB0aGlzLmVsZW1lbnQ7XG4gICAgaWYgKHR5cGVvZiBjc3Nwcm9wcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIFtjc3Nwcm9wc107XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgaW4gY3NzcHJvcHMpIHtcbiAgICAgICAgaWYgKGNzc3Byb3BzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgb2xkUHJvcHNbaV0gPSBlbC5jc3MoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7IC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbih0aGlzLmVsZW1lbnQsIGNzc3Byb3BzLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LmNzcyhjc3Nwcm9wcyk7XG4gICAgfVxuICAgIHJldHVybiBbb2xkUHJvcHNdO1xuICB9In0seyJhcmdzIjp7IjAiOiJTaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIHt0ZW1wfSAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiB7aX0gKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuIiwiMSI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG1zZywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlsbCAmJiB0eXBlb2Ygb3B0aW9ucy5maWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyByZXBsYWNlIHRoZSBsYWJlbHMgaW4gdGhlIHN0cmluZyBpZiB0aGUgcmVwbGFjZW1lbnRzIGFyZSBnaXZlbiBpbiB0aGUgb3B0aW9uc1xuICAgICAgbXNnID0gSlNBVi51dGlscy5yZXBsYWNlTGFiZWxzKG1zZywgb3B0aW9ucy5maWxsKTtcbiAgICB9XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7Y29sb3I6IFwiYmxhY2tcIiwgcHJlc2VydmU6IGZhbHNlfSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMub3V0cHV0KSB7XG4gICAgICBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSAmJiBvcHRzLnByZXNlcnZlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMub3V0cHV0LmZpbmQoXCJkaXY6bGFzdFwiKSxcbiAgICAgICAgICBuZXdtc2cgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmIChlbC5zaXplKCkgPiAwKSB7IC8vIGV4aXN0aW5nIGNvbnRlbnQgaW4gbWVzc2FnZSBvdXRwdXRcbiAgICAgICAgICBlbC5hcHBlbmQobmV3bXNnKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3QgbWVzc2FnZVxuICAgICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSkge1xuICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgLy99IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdnNjcm9sbFwiKSkge1xuICAgICAgfSBlbHNlIHsgLy8gZS5nLiBcImpzYXZzY3JvbGxcIiwgd2hpY2ggaXMgZGVmYXVsdFxuICAgICAgICB0aGlzLm91dHB1dC5hcHBlbmQoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFswXSkge1xuICAgICAgICAgIHRoaXMub3V0cHV0WzBdLnNjcm9sbFRvcCA9IHRoaXMub3V0cHV0WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuanNhdi5SRUNPUkQpIHsgLy8gdHJpZ2dlciBldmVudHMgb25seSBpZiBub3QgcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuY29udGFpbmVyLnRyaWdnZXIoXCJqc2F2LW1lc3NhZ2VcIiwgW21zZywgb3B0aW9uc10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSJ9LHsiYXJncyI6eyIwIjo4LCIxIjoianNhdnByZXZpb3VzbGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6MywiMSI6ImpzYXZwcmV2aW91c2xpbmUganNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo2LCIxIjoianNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9XSwiaHRtbCI6eyJjb3VudGVySFRNTCI6IjggLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+S29waW9pIDI4IHRhdWx1a29zdGEgdGVtcC1tdXV0dHVqYWFuLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIzXCI+Mzwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIwXCI+MDwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzQxLDQ0LDgwLDgwLDk5LDM4LDI0LDE0LDg2LDI5XSxbMjhdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjoyfSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6NTh9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjMsIjEiOiJqc2F2cHJldmlvdXNsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo2LCIxIjoianNhdnByZXZpb3VzbGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiI5IC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4gMjggKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4gMyAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiM1wiPjM8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiM1wiPjM8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbNDEsNDQsNDQsODAsOTksMzgsMjQsMTQsODYsMjldLFsyOF1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjF9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjo1NH0sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiB7dGVtcH0gKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4ge2l9IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIxMCAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIDI4ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIDMgKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjNcIj4zPC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjJcIj4yPC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbNDEsNDEsNDQsODAsOTksMzgsMjQsMTQsODYsMjldLFsyOF1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjB9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjozN30sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIHt0ZW1wfSB0ZW1wLW11dXR0dWphc3RhIHRhdWx1a2tvb24gb2lrZWFsbGUgcGFpa2FsbGUuIFRhdWx1a2tvIG9uIG55dCBq5HJqZXN0ZXR0eSBub2xsYW4gamEge2l9Om4gduRsaWxs5C4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjYsIjEiOiJqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjgsIjEiOiJqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMTEgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiAyOCAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiAzIChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIzXCI+Mzwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIxXCI+MTwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI4LDQxLDQ0LDgwLDk5LDM4LDI0LDE0LDg2LDI5XSxbMjhdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjo0fSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IktvcGlvaSB7YXJyX2F0X2l9IHRhdWx1a29zdGEgdGVtcC1tdXV0dHVqYWFuLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifSx7ImFyZ3MiOnsiMCI6NiwiMSI6ImpzYXZwcmV2aW91c2xpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjgsIjEiOiJqc2F2cHJldmlvdXNsaW5lIGpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6MywiMSI6ImpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIxMiAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQgMjggdGVtcC1tdXV0dHVqYXN0YSB0YXVsdWtrb29uIG9pa2VhbGxlIHBhaWthbGxlLiBUYXVsdWtrbyBvbiBueXQgauRyamVzdGV0dHkgbm9sbGFuIGphIDM6biB25GxpbGzkLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIzXCI+Mzwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIwXCI+MDwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI4LDQxLDQ0LDgwLDk5LDM4LDI0LDE0LDg2LDI5XSxbOTldXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjo0fSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGNzc3Byb3BzLCBvcHRpb25zKSB7XG4gICAgdmFyIG9sZFByb3BzID0gJC5leHRlbmQodHJ1ZSwge30sIGNzc3Byb3BzKSxcbiAgICAgICAgZWwgPSB0aGlzLmVsZW1lbnQ7XG4gICAgaWYgKHR5cGVvZiBjc3Nwcm9wcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIFtjc3Nwcm9wc107XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgaW4gY3NzcHJvcHMpIHtcbiAgICAgICAgaWYgKGNzc3Byb3BzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgb2xkUHJvcHNbaV0gPSBlbC5jc3MoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7IC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbih0aGlzLmVsZW1lbnQsIGNzc3Byb3BzLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LmNzcyhjc3Nwcm9wcyk7XG4gICAgfVxuICAgIHJldHVybiBbb2xkUHJvcHNdO1xuICB9In0seyJhcmdzIjp7IjAiOiJTaWlycuQge3RlbXB9IHRlbXAtbXV1dHR1amFzdGEgdGF1bHVra29vbiBvaWtlYWxsZSBwYWlrYWxsZS4gVGF1bHVra28gb24gbnl0IGrkcmplc3RldHR5IG5vbGxhbiBqYSB7aX06biB25GxpbGzkLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifSx7ImFyZ3MiOnsiMCI6OCwiMSI6ImpzYXZwcmV2aW91c2xpbmUganNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjozLCIxIjoianNhdnByZXZpb3VzbGluZSBqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMTMgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+S29waW9pIDk5IHRhdWx1a29zdGEgdGVtcC1tdXV0dHVqYWFuLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI0XCI+NDwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIwXCI+MDwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI4LDQxLDQ0LDgwLDk5LDM4LDI0LDE0LDg2LDI5XSxbOTldXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjo1fSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IktvcGlvaSB7YXJyX2F0X2l9IHRhdWx1a29zdGEgdGVtcC1tdXV0dHVqYWFuLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifSx7ImFyZ3MiOnsiMCI6MywiMSI6ImpzYXZwcmV2aW91c2xpbmUganNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo4LCIxIjoianNhdnByZXZpb3VzbGluZSBqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMTQgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIDk5IHRlbXAtbXV1dHR1amFzdGEgdGF1bHVra29vbiBvaWtlYWxsZSBwYWlrYWxsZS4gVGF1bHVra28gb24gbnl0IGrkcmplc3RldHR5IG5vbGxhbiBqYSA0Om4gduRsaWxs5C48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiNFwiPjQ8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiNFwiPjQ8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1syOCw0MSw0NCw4MCw5OSwzOCwyNCwxNCw4NiwyOV0sWzM4XV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6NX0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSIsIjEiOjEzMH0sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiB7dGVtcH0gKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4ge2l9IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifSx7ImFyZ3MiOnsiMCI6OCwiMSI6ImpzYXZwcmV2aW91c2xpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjMsIjEiOiJqc2F2cHJldmlvdXNsaW5lIGpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6NiwiMSI6ImpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIxNSAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5Lb3Bpb2kgMzggdGF1bHVrb3N0YSB0ZW1wLW11dXR0dWphYW4uPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjVcIj41PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjRcIj40PC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbMjgsNDEsNDQsODAsOTksOTksMjQsMTQsODYsMjldLFszOF1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjR9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjoxMDV9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjMsIjEiOiJqc2F2cHJldmlvdXNsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo2LCIxIjoianNhdnByZXZpb3VzbGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIxNiAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIDM4ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIDUgKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjVcIj41PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjVcIj41PC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI4LDQxLDQ0LDgwLDgwLDk5LDI0LDE0LDg2LDI5XSxbMzhdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjozfSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6NTh9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMTcgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiAzOCAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiA1IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI1XCI+NTwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI0XCI+NDwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1syOCw0MSw0NCw0NCw4MCw5OSwyNCwxNCw4NiwyOV0sWzM4XV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6Mn0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSIsIjEiOjU0fSwiZWZmZWN0IjoiZnVuY3Rpb24oZWxlbSwgbmV3SGVpZ2h0LCBvcHRpb25zKSB7XG4gICAgICAvLyB0aGUgSlNBVi5hbmltIHdyYXBwZXIgd2lsbCBtYWtlIHN1cmUgdGhpcyBwb2ludHMgdG8ganNhdiBpbnN0YW5jZVxuICAgICAgdmFyIG9sZEhlaWdodCA9IGVsZW0uaGVpZ2h0KCk7XG4gICAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbihlbGVtLCB7aGVpZ2h0OiBuZXdIZWlnaHR9LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0uY3NzKHtoZWlnaHQ6IG5ld0hlaWdodH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtlbGVtLCBvbGRIZWlnaHRdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGNzc3Byb3BzLCBvcHRpb25zKSB7XG4gICAgdmFyIG9sZFByb3BzID0gJC5leHRlbmQodHJ1ZSwge30sIGNzc3Byb3BzKSxcbiAgICAgICAgZWwgPSB0aGlzLmVsZW1lbnQ7XG4gICAgaWYgKHR5cGVvZiBjc3Nwcm9wcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIFtjc3Nwcm9wc107XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgaW4gY3NzcHJvcHMpIHtcbiAgICAgICAgaWYgKGNzc3Byb3BzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgb2xkUHJvcHNbaV0gPSBlbC5jc3MoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7IC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbih0aGlzLmVsZW1lbnQsIGNzc3Byb3BzLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LmNzcyhjc3Nwcm9wcyk7XG4gICAgfVxuICAgIHJldHVybiBbb2xkUHJvcHNdO1xuICB9In0seyJhcmdzIjp7IjAiOiJTaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIHt0ZW1wfSAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiB7aX0gKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuIiwiMSI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG1zZywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlsbCAmJiB0eXBlb2Ygb3B0aW9ucy5maWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyByZXBsYWNlIHRoZSBsYWJlbHMgaW4gdGhlIHN0cmluZyBpZiB0aGUgcmVwbGFjZW1lbnRzIGFyZSBnaXZlbiBpbiB0aGUgb3B0aW9uc1xuICAgICAgbXNnID0gSlNBVi51dGlscy5yZXBsYWNlTGFiZWxzKG1zZywgb3B0aW9ucy5maWxsKTtcbiAgICB9XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7Y29sb3I6IFwiYmxhY2tcIiwgcHJlc2VydmU6IGZhbHNlfSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMub3V0cHV0KSB7XG4gICAgICBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSAmJiBvcHRzLnByZXNlcnZlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMub3V0cHV0LmZpbmQoXCJkaXY6bGFzdFwiKSxcbiAgICAgICAgICBuZXdtc2cgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmIChlbC5zaXplKCkgPiAwKSB7IC8vIGV4aXN0aW5nIGNvbnRlbnQgaW4gbWVzc2FnZSBvdXRwdXRcbiAgICAgICAgICBlbC5hcHBlbmQobmV3bXNnKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3QgbWVzc2FnZVxuICAgICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSkge1xuICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgLy99IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdnNjcm9sbFwiKSkge1xuICAgICAgfSBlbHNlIHsgLy8gZS5nLiBcImpzYXZzY3JvbGxcIiwgd2hpY2ggaXMgZGVmYXVsdFxuICAgICAgICB0aGlzLm91dHB1dC5hcHBlbmQoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFswXSkge1xuICAgICAgICAgIHRoaXMub3V0cHV0WzBdLnNjcm9sbFRvcCA9IHRoaXMub3V0cHV0WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuanNhdi5SRUNPUkQpIHsgLy8gdHJpZ2dlciBldmVudHMgb25seSBpZiBub3QgcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuY29udGFpbmVyLnRyaWdnZXIoXCJqc2F2LW1lc3NhZ2VcIiwgW21zZywgb3B0aW9uc10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSJ9XSwiaHRtbCI6eyJjb3VudGVySFRNTCI6IjE4IC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4gMzggKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4gNSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiNVwiPjU8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiM1wiPjM8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1syOCw0MSw0MSw0NCw4MCw5OSwyNCwxNCw4NiwyOV0sWzM4XV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6MX0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSIsIjEiOjUwfSwiZWZmZWN0IjoiZnVuY3Rpb24oZWxlbSwgbmV3SGVpZ2h0LCBvcHRpb25zKSB7XG4gICAgICAvLyB0aGUgSlNBVi5hbmltIHdyYXBwZXIgd2lsbCBtYWtlIHN1cmUgdGhpcyBwb2ludHMgdG8ganNhdiBpbnN0YW5jZVxuICAgICAgdmFyIG9sZEhlaWdodCA9IGVsZW0uaGVpZ2h0KCk7XG4gICAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbihlbGVtLCB7aGVpZ2h0OiBuZXdIZWlnaHR9LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0uY3NzKHtoZWlnaHQ6IG5ld0hlaWdodH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtlbGVtLCBvbGRIZWlnaHRdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGNzc3Byb3BzLCBvcHRpb25zKSB7XG4gICAgdmFyIG9sZFByb3BzID0gJC5leHRlbmQodHJ1ZSwge30sIGNzc3Byb3BzKSxcbiAgICAgICAgZWwgPSB0aGlzLmVsZW1lbnQ7XG4gICAgaWYgKHR5cGVvZiBjc3Nwcm9wcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIFtjc3Nwcm9wc107XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgaW4gY3NzcHJvcHMpIHtcbiAgICAgICAgaWYgKGNzc3Byb3BzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgb2xkUHJvcHNbaV0gPSBlbC5jc3MoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7IC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbih0aGlzLmVsZW1lbnQsIGNzc3Byb3BzLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LmNzcyhjc3Nwcm9wcyk7XG4gICAgfVxuICAgIHJldHVybiBbb2xkUHJvcHNdO1xuICB9In0seyJhcmdzIjp7IjAiOiJTaWlycuQge3RlbXB9IHRlbXAtbXV1dHR1amFzdGEgdGF1bHVra29vbiBvaWtlYWxsZSBwYWlrYWxsZS4gVGF1bHVra28gb24gbnl0IGrkcmplc3RldHR5IG5vbGxhbiBqYSB7aX06biB25GxpbGzkLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifSx7ImFyZ3MiOnsiMCI6NiwiMSI6ImpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6OCwiMSI6ImpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIxOSAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIDM4ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIDUgKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjVcIj41PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjJcIj4yPC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbMjgsMzgsNDEsNDQsODAsOTksMjQsMTQsODYsMjldLFszOF1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjZ9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiS29waW9pIHthcnJfYXRfaX0gdGF1bHVrb3N0YSB0ZW1wLW11dXR0dWphYW4uIiwiMSI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG1zZywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlsbCAmJiB0eXBlb2Ygb3B0aW9ucy5maWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyByZXBsYWNlIHRoZSBsYWJlbHMgaW4gdGhlIHN0cmluZyBpZiB0aGUgcmVwbGFjZW1lbnRzIGFyZSBnaXZlbiBpbiB0aGUgb3B0aW9uc1xuICAgICAgbXNnID0gSlNBVi51dGlscy5yZXBsYWNlTGFiZWxzKG1zZywgb3B0aW9ucy5maWxsKTtcbiAgICB9XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7Y29sb3I6IFwiYmxhY2tcIiwgcHJlc2VydmU6IGZhbHNlfSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMub3V0cHV0KSB7XG4gICAgICBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSAmJiBvcHRzLnByZXNlcnZlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMub3V0cHV0LmZpbmQoXCJkaXY6bGFzdFwiKSxcbiAgICAgICAgICBuZXdtc2cgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmIChlbC5zaXplKCkgPiAwKSB7IC8vIGV4aXN0aW5nIGNvbnRlbnQgaW4gbWVzc2FnZSBvdXRwdXRcbiAgICAgICAgICBlbC5hcHBlbmQobmV3bXNnKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3QgbWVzc2FnZVxuICAgICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSkge1xuICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgLy99IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdnNjcm9sbFwiKSkge1xuICAgICAgfSBlbHNlIHsgLy8gZS5nLiBcImpzYXZzY3JvbGxcIiwgd2hpY2ggaXMgZGVmYXVsdFxuICAgICAgICB0aGlzLm91dHB1dC5hcHBlbmQoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFswXSkge1xuICAgICAgICAgIHRoaXMub3V0cHV0WzBdLnNjcm9sbFRvcCA9IHRoaXMub3V0cHV0WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuanNhdi5SRUNPUkQpIHsgLy8gdHJpZ2dlciBldmVudHMgb25seSBpZiBub3QgcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuY29udGFpbmVyLnRyaWdnZXIoXCJqc2F2LW1lc3NhZ2VcIiwgW21zZywgb3B0aW9uc10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSJ9LHsiYXJncyI6eyIwIjo2LCIxIjoianNhdnByZXZpb3VzbGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6OCwiMSI6ImpzYXZwcmV2aW91c2xpbmUganNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjozLCIxIjoianNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9XSwiaHRtbCI6eyJjb3VudGVySFRNTCI6IjIwIC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPlNpaXJy5CAzOCB0ZW1wLW11dXR0dWphc3RhIHRhdWx1a2tvb24gb2lrZWFsbGUgcGFpa2FsbGUuIFRhdWx1a2tvIG9uIG55dCBq5HJqZXN0ZXR0eSBub2xsYW4gamEgNTpuIHbkbGlsbOQuPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjVcIj41PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjFcIj4xPC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbMjgsMzgsNDEsNDQsODAsOTksMjQsMTQsODYsMjldLFsyNF1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjZ9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjoxMzB9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjgsIjEiOiJqc2F2cHJldmlvdXNsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjozLCIxIjoianNhdnByZXZpb3VzbGluZSBqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjYsIjEiOiJqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMjEgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+S29waW9pIDI0IHRhdWx1a29zdGEgdGVtcC1tdXV0dHVqYWFuLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI2XCI+Njwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIxXCI+MTwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI4LDM4LDQxLDQ0LDgwLDk5LDk5LDE0LDg2LDI5XSxbMjRdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjo1fSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6MTA1fSwiZWZmZWN0IjoiZnVuY3Rpb24oZWxlbSwgbmV3SGVpZ2h0LCBvcHRpb25zKSB7XG4gICAgICAvLyB0aGUgSlNBVi5hbmltIHdyYXBwZXIgd2lsbCBtYWtlIHN1cmUgdGhpcyBwb2ludHMgdG8ganNhdiBpbnN0YW5jZVxuICAgICAgdmFyIG9sZEhlaWdodCA9IGVsZW0uaGVpZ2h0KCk7XG4gICAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbihlbGVtLCB7aGVpZ2h0OiBuZXdIZWlnaHR9LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0uY3NzKHtoZWlnaHQ6IG5ld0hlaWdodH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtlbGVtLCBvbGRIZWlnaHRdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGNzc3Byb3BzLCBvcHRpb25zKSB7XG4gICAgdmFyIG9sZFByb3BzID0gJC5leHRlbmQodHJ1ZSwge30sIGNzc3Byb3BzKSxcbiAgICAgICAgZWwgPSB0aGlzLmVsZW1lbnQ7XG4gICAgaWYgKHR5cGVvZiBjc3Nwcm9wcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIFtjc3Nwcm9wc107XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgaW4gY3NzcHJvcHMpIHtcbiAgICAgICAgaWYgKGNzc3Byb3BzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgb2xkUHJvcHNbaV0gPSBlbC5jc3MoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7IC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbih0aGlzLmVsZW1lbnQsIGNzc3Byb3BzLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LmNzcyhjc3Nwcm9wcyk7XG4gICAgfVxuICAgIHJldHVybiBbb2xkUHJvcHNdO1xuICB9In0seyJhcmdzIjp7IjAiOiJTaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIHt0ZW1wfSAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiB7aX0gKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuIiwiMSI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG1zZywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlsbCAmJiB0eXBlb2Ygb3B0aW9ucy5maWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyByZXBsYWNlIHRoZSBsYWJlbHMgaW4gdGhlIHN0cmluZyBpZiB0aGUgcmVwbGFjZW1lbnRzIGFyZSBnaXZlbiBpbiB0aGUgb3B0aW9uc1xuICAgICAgbXNnID0gSlNBVi51dGlscy5yZXBsYWNlTGFiZWxzKG1zZywgb3B0aW9ucy5maWxsKTtcbiAgICB9XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7Y29sb3I6IFwiYmxhY2tcIiwgcHJlc2VydmU6IGZhbHNlfSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMub3V0cHV0KSB7XG4gICAgICBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSAmJiBvcHRzLnByZXNlcnZlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMub3V0cHV0LmZpbmQoXCJkaXY6bGFzdFwiKSxcbiAgICAgICAgICBuZXdtc2cgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmIChlbC5zaXplKCkgPiAwKSB7IC8vIGV4aXN0aW5nIGNvbnRlbnQgaW4gbWVzc2FnZSBvdXRwdXRcbiAgICAgICAgICBlbC5hcHBlbmQobmV3bXNnKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3QgbWVzc2FnZVxuICAgICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSkge1xuICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgLy99IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdnNjcm9sbFwiKSkge1xuICAgICAgfSBlbHNlIHsgLy8gZS5nLiBcImpzYXZzY3JvbGxcIiwgd2hpY2ggaXMgZGVmYXVsdFxuICAgICAgICB0aGlzLm91dHB1dC5hcHBlbmQoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFswXSkge1xuICAgICAgICAgIHRoaXMub3V0cHV0WzBdLnNjcm9sbFRvcCA9IHRoaXMub3V0cHV0WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuanNhdi5SRUNPUkQpIHsgLy8gdHJpZ2dlciBldmVudHMgb25seSBpZiBub3QgcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuY29udGFpbmVyLnRyaWdnZXIoXCJqc2F2LW1lc3NhZ2VcIiwgW21zZywgb3B0aW9uc10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSJ9LHsiYXJncyI6eyIwIjozLCIxIjoianNhdnByZXZpb3VzbGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6NiwiMSI6ImpzYXZwcmV2aW91c2xpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMjIgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiAyNCAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiA2IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI2XCI+Njwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI2XCI+Njwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1syOCwzOCw0MSw0NCw4MCw4MCw5OSwxNCw4NiwyOV0sWzI0XV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6NH0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSIsIjEiOjU4fSwiZWZmZWN0IjoiZnVuY3Rpb24oZWxlbSwgbmV3SGVpZ2h0LCBvcHRpb25zKSB7XG4gICAgICAvLyB0aGUgSlNBVi5hbmltIHdyYXBwZXIgd2lsbCBtYWtlIHN1cmUgdGhpcyBwb2ludHMgdG8ganNhdiBpbnN0YW5jZVxuICAgICAgdmFyIG9sZEhlaWdodCA9IGVsZW0uaGVpZ2h0KCk7XG4gICAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbihlbGVtLCB7aGVpZ2h0OiBuZXdIZWlnaHR9LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0uY3NzKHtoZWlnaHQ6IG5ld0hlaWdodH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtlbGVtLCBvbGRIZWlnaHRdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGNzc3Byb3BzLCBvcHRpb25zKSB7XG4gICAgdmFyIG9sZFByb3BzID0gJC5leHRlbmQodHJ1ZSwge30sIGNzc3Byb3BzKSxcbiAgICAgICAgZWwgPSB0aGlzLmVsZW1lbnQ7XG4gICAgaWYgKHR5cGVvZiBjc3Nwcm9wcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIFtjc3Nwcm9wc107XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgaW4gY3NzcHJvcHMpIHtcbiAgICAgICAgaWYgKGNzc3Byb3BzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgb2xkUHJvcHNbaV0gPSBlbC5jc3MoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7IC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbih0aGlzLmVsZW1lbnQsIGNzc3Byb3BzLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LmNzcyhjc3Nwcm9wcyk7XG4gICAgfVxuICAgIHJldHVybiBbb2xkUHJvcHNdO1xuICB9In0seyJhcmdzIjp7IjAiOiJTaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIHt0ZW1wfSAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiB7aX0gKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuIiwiMSI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG1zZywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlsbCAmJiB0eXBlb2Ygb3B0aW9ucy5maWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyByZXBsYWNlIHRoZSBsYWJlbHMgaW4gdGhlIHN0cmluZyBpZiB0aGUgcmVwbGFjZW1lbnRzIGFyZSBnaXZlbiBpbiB0aGUgb3B0aW9uc1xuICAgICAgbXNnID0gSlNBVi51dGlscy5yZXBsYWNlTGFiZWxzKG1zZywgb3B0aW9ucy5maWxsKTtcbiAgICB9XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7Y29sb3I6IFwiYmxhY2tcIiwgcHJlc2VydmU6IGZhbHNlfSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMub3V0cHV0KSB7XG4gICAgICBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSAmJiBvcHRzLnByZXNlcnZlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMub3V0cHV0LmZpbmQoXCJkaXY6bGFzdFwiKSxcbiAgICAgICAgICBuZXdtc2cgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmIChlbC5zaXplKCkgPiAwKSB7IC8vIGV4aXN0aW5nIGNvbnRlbnQgaW4gbWVzc2FnZSBvdXRwdXRcbiAgICAgICAgICBlbC5hcHBlbmQobmV3bXNnKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3QgbWVzc2FnZVxuICAgICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSkge1xuICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgLy99IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdnNjcm9sbFwiKSkge1xuICAgICAgfSBlbHNlIHsgLy8gZS5nLiBcImpzYXZzY3JvbGxcIiwgd2hpY2ggaXMgZGVmYXVsdFxuICAgICAgICB0aGlzLm91dHB1dC5hcHBlbmQoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFswXSkge1xuICAgICAgICAgIHRoaXMub3V0cHV0WzBdLnNjcm9sbFRvcCA9IHRoaXMub3V0cHV0WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuanNhdi5SRUNPUkQpIHsgLy8gdHJpZ2dlciBldmVudHMgb25seSBpZiBub3QgcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuY29udGFpbmVyLnRyaWdnZXIoXCJqc2F2LW1lc3NhZ2VcIiwgW21zZywgb3B0aW9uc10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSJ9XSwiaHRtbCI6eyJjb3VudGVySFRNTCI6IjIzIC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4gMjQgKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4gNiAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiNlwiPjY8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiNVwiPjU8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbMjgsMzgsNDEsNDQsNDQsODAsOTksMTQsODYsMjldLFsyNF1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjN9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjo1NH0sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiB7dGVtcH0gKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4ge2l9IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIyNCAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIDI0ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIDYgKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjZcIj42PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjRcIj40PC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbMjgsMzgsNDEsNDEsNDQsODAsOTksMTQsODYsMjldLFsyNF1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjJ9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjo1MH0sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiB7dGVtcH0gKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4ge2l9IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIyNSAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIDI0ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIDYgKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjZcIj42PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjNcIj4zPC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbMjgsMzgsMzgsNDEsNDQsODAsOTksMTQsODYsMjldLFsyNF1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjF9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjozN30sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiB7dGVtcH0gKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4ge2l9IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIyNiAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIDI0ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIDYgKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjZcIj42PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjJcIj4yPC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbMjgsMjgsMzgsNDEsNDQsODAsOTksMTQsODYsMjldLFsyNF1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjB9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjozMn0sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIHt0ZW1wfSB0ZW1wLW11dXR0dWphc3RhIHRhdWx1a2tvb24gb2lrZWFsbGUgcGFpa2FsbGUuIFRhdWx1a2tvIG9uIG55dCBq5HJqZXN0ZXR0eSBub2xsYW4gamEge2l9Om4gduRsaWxs5C4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjYsIjEiOiJqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjgsIjEiOiJqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMjcgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiAyNCAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiA2IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI2XCI+Njwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIxXCI+MTwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI0LDI4LDM4LDQxLDQ0LDgwLDk5LDE0LDg2LDI5XSxbMjRdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjo3fSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IktvcGlvaSB7YXJyX2F0X2l9IHRhdWx1a29zdGEgdGVtcC1tdXV0dHVqYWFuLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifSx7ImFyZ3MiOnsiMCI6NiwiMSI6ImpzYXZwcmV2aW91c2xpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjgsIjEiOiJqc2F2cHJldmlvdXNsaW5lIGpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6MywiMSI6ImpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIyOCAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQgMjQgdGVtcC1tdXV0dHVqYXN0YSB0YXVsdWtrb29uIG9pa2VhbGxlIHBhaWthbGxlLiBUYXVsdWtrbyBvbiBueXQgauRyamVzdGV0dHkgbm9sbGFuIGphIDY6biB25GxpbGzkLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI2XCI+Njwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIwXCI+MDwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI0LDI4LDM4LDQxLDQ0LDgwLDk5LDE0LDg2LDI5XSxbMTRdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjo3fSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6MTMwfSwiZWZmZWN0IjoiZnVuY3Rpb24oZWxlbSwgbmV3SGVpZ2h0LCBvcHRpb25zKSB7XG4gICAgICAvLyB0aGUgSlNBVi5hbmltIHdyYXBwZXIgd2lsbCBtYWtlIHN1cmUgdGhpcyBwb2ludHMgdG8ganNhdiBpbnN0YW5jZVxuICAgICAgdmFyIG9sZEhlaWdodCA9IGVsZW0uaGVpZ2h0KCk7XG4gICAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbihlbGVtLCB7aGVpZ2h0OiBuZXdIZWlnaHR9LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0uY3NzKHtoZWlnaHQ6IG5ld0hlaWdodH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtlbGVtLCBvbGRIZWlnaHRdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGNzc3Byb3BzLCBvcHRpb25zKSB7XG4gICAgdmFyIG9sZFByb3BzID0gJC5leHRlbmQodHJ1ZSwge30sIGNzc3Byb3BzKSxcbiAgICAgICAgZWwgPSB0aGlzLmVsZW1lbnQ7XG4gICAgaWYgKHR5cGVvZiBjc3Nwcm9wcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIFtjc3Nwcm9wc107XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgaW4gY3NzcHJvcHMpIHtcbiAgICAgICAgaWYgKGNzc3Byb3BzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgb2xkUHJvcHNbaV0gPSBlbC5jc3MoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7IC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbih0aGlzLmVsZW1lbnQsIGNzc3Byb3BzLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LmNzcyhjc3Nwcm9wcyk7XG4gICAgfVxuICAgIHJldHVybiBbb2xkUHJvcHNdO1xuICB9In0seyJhcmdzIjp7IjAiOiJTaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIHt0ZW1wfSAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiB7aX0gKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuIiwiMSI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG1zZywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlsbCAmJiB0eXBlb2Ygb3B0aW9ucy5maWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyByZXBsYWNlIHRoZSBsYWJlbHMgaW4gdGhlIHN0cmluZyBpZiB0aGUgcmVwbGFjZW1lbnRzIGFyZSBnaXZlbiBpbiB0aGUgb3B0aW9uc1xuICAgICAgbXNnID0gSlNBVi51dGlscy5yZXBsYWNlTGFiZWxzKG1zZywgb3B0aW9ucy5maWxsKTtcbiAgICB9XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7Y29sb3I6IFwiYmxhY2tcIiwgcHJlc2VydmU6IGZhbHNlfSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMub3V0cHV0KSB7XG4gICAgICBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSAmJiBvcHRzLnByZXNlcnZlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMub3V0cHV0LmZpbmQoXCJkaXY6bGFzdFwiKSxcbiAgICAgICAgICBuZXdtc2cgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmIChlbC5zaXplKCkgPiAwKSB7IC8vIGV4aXN0aW5nIGNvbnRlbnQgaW4gbWVzc2FnZSBvdXRwdXRcbiAgICAgICAgICBlbC5hcHBlbmQobmV3bXNnKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3QgbWVzc2FnZVxuICAgICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSkge1xuICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgLy99IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdnNjcm9sbFwiKSkge1xuICAgICAgfSBlbHNlIHsgLy8gZS5nLiBcImpzYXZzY3JvbGxcIiwgd2hpY2ggaXMgZGVmYXVsdFxuICAgICAgICB0aGlzLm91dHB1dC5hcHBlbmQoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFswXSkge1xuICAgICAgICAgIHRoaXMub3V0cHV0WzBdLnNjcm9sbFRvcCA9IHRoaXMub3V0cHV0WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuanNhdi5SRUNPUkQpIHsgLy8gdHJpZ2dlciBldmVudHMgb25seSBpZiBub3QgcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuY29udGFpbmVyLnRyaWdnZXIoXCJqc2F2LW1lc3NhZ2VcIiwgW21zZywgb3B0aW9uc10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSJ9LHsiYXJncyI6eyIwIjo4LCIxIjoianNhdnByZXZpb3VzbGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6MywiMSI6ImpzYXZwcmV2aW91c2xpbmUganNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo2LCIxIjoianNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9XSwiaHRtbCI6eyJjb3VudGVySFRNTCI6IjI5IC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPktvcGlvaSAxNCB0YXVsdWtvc3RhIHRlbXAtbXV1dHR1amFhbi48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiN1wiPjc8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMFwiPjA8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1syNCwyOCwzOCw0MSw0NCw4MCw5OSw5OSw4NiwyOV0sWzE0XV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6Nn0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSIsIjEiOjEwNX0sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiB7dGVtcH0gKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4ge2l9IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifSx7ImFyZ3MiOnsiMCI6MywiMSI6ImpzYXZwcmV2aW91c2xpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjYsIjEiOiJqc2F2cHJldmlvdXNsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9XSwiaHRtbCI6eyJjb3VudGVySFRNTCI6IjMwIC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4gMTQgKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4gNyAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiN1wiPjc8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiN1wiPjc8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbMjQsMjgsMzgsNDEsNDQsODAsODAsOTksODYsMjldLFsxNF1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjV9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjo1OH0sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiB7dGVtcH0gKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4ge2l9IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIzMSAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIDE0ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIDcgKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjdcIj43PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjZcIj42PC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI0LDI4LDM4LDQxLDQ0LDQ0LDgwLDk5LDg2LDI5XSxbMTRdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjo0fSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6NTR9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMzIgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiAxNCAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiA3IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI3XCI+Nzwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI1XCI+NTwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI0LDI4LDM4LDQxLDQxLDQ0LDgwLDk5LDg2LDI5XSxbMTRdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjozfSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6NTB9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMzMgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiAxNCAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiA3IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI3XCI+Nzwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI0XCI+NDwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI0LDI4LDM4LDM4LDQxLDQ0LDgwLDk5LDg2LDI5XSxbMTRdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjoyfSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6Mzd9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMzQgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiAxNCAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiA3IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI3XCI+Nzwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIzXCI+Mzwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI0LDI4LDI4LDM4LDQxLDQ0LDgwLDk5LDg2LDI5XSxbMTRdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjoxfSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6MzJ9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMzUgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiAxNCAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiA3IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI3XCI+Nzwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIyXCI+Mjwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzI0LDI0LDI4LDM4LDQxLDQ0LDgwLDk5LDg2LDI5XSxbMTRdXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjowfSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6MTh9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CB7dGVtcH0gdGVtcC1tdXV0dHVqYXN0YSB0YXVsdWtrb29uIG9pa2VhbGxlIHBhaWthbGxlLiBUYXVsdWtrbyBvbiBueXQgauRyamVzdGV0dHkgbm9sbGFuIGphIHtpfTpuIHbkbGlsbOQuIiwiMSI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG1zZywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlsbCAmJiB0eXBlb2Ygb3B0aW9ucy5maWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyByZXBsYWNlIHRoZSBsYWJlbHMgaW4gdGhlIHN0cmluZyBpZiB0aGUgcmVwbGFjZW1lbnRzIGFyZSBnaXZlbiBpbiB0aGUgb3B0aW9uc1xuICAgICAgbXNnID0gSlNBVi51dGlscy5yZXBsYWNlTGFiZWxzKG1zZywgb3B0aW9ucy5maWxsKTtcbiAgICB9XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7Y29sb3I6IFwiYmxhY2tcIiwgcHJlc2VydmU6IGZhbHNlfSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMub3V0cHV0KSB7XG4gICAgICBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSAmJiBvcHRzLnByZXNlcnZlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMub3V0cHV0LmZpbmQoXCJkaXY6bGFzdFwiKSxcbiAgICAgICAgICBuZXdtc2cgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmIChlbC5zaXplKCkgPiAwKSB7IC8vIGV4aXN0aW5nIGNvbnRlbnQgaW4gbWVzc2FnZSBvdXRwdXRcbiAgICAgICAgICBlbC5hcHBlbmQobmV3bXNnKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3QgbWVzc2FnZVxuICAgICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSkge1xuICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgLy99IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdnNjcm9sbFwiKSkge1xuICAgICAgfSBlbHNlIHsgLy8gZS5nLiBcImpzYXZzY3JvbGxcIiwgd2hpY2ggaXMgZGVmYXVsdFxuICAgICAgICB0aGlzLm91dHB1dC5hcHBlbmQoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFswXSkge1xuICAgICAgICAgIHRoaXMub3V0cHV0WzBdLnNjcm9sbFRvcCA9IHRoaXMub3V0cHV0WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuanNhdi5SRUNPUkQpIHsgLy8gdHJpZ2dlciBldmVudHMgb25seSBpZiBub3QgcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuY29udGFpbmVyLnRyaWdnZXIoXCJqc2F2LW1lc3NhZ2VcIiwgW21zZywgb3B0aW9uc10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSJ9LHsiYXJncyI6eyIwIjo2LCIxIjoianNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo4LCIxIjoianNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9XSwiaHRtbCI6eyJjb3VudGVySFRNTCI6IjM2IC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4gMTQgKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4gNyAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiN1wiPjc8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMVwiPjE8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1sxNCwyNCwyOCwzOCw0MSw0NCw4MCw5OSw4NiwyOV0sWzE0XV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6OH0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJLb3Bpb2kge2Fycl9hdF9pfSB0YXVsdWtvc3RhIHRlbXAtbXV1dHR1amFhbi4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjYsIjEiOiJqc2F2cHJldmlvdXNsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo4LCIxIjoianNhdnByZXZpb3VzbGluZSBqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjMsIjEiOiJqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiMzcgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIDE0IHRlbXAtbXV1dHR1amFzdGEgdGF1bHVra29vbiBvaWtlYWxsZSBwYWlrYWxsZS4gVGF1bHVra28gb24gbnl0IGrkcmplc3RldHR5IG5vbGxhbiBqYSA3Om4gduRsaWxs5C48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiN1wiPjc8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMFwiPjA8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1sxNCwyNCwyOCwzOCw0MSw0NCw4MCw5OSw4NiwyOV0sWzg2XV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6OH0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSIsIjEiOjEzMH0sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiB7dGVtcH0gKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4ge2l9IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifSx7ImFyZ3MiOnsiMCI6OCwiMSI6ImpzYXZwcmV2aW91c2xpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjMsIjEiOiJqc2F2cHJldmlvdXNsaW5lIGpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6NiwiMSI6ImpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiIzOCAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5Lb3Bpb2kgODYgdGF1bHVrb3N0YSB0ZW1wLW11dXR0dWphYW4uPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjhcIj44PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjBcIj4wPC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbMTQsMjQsMjgsMzgsNDEsNDQsODAsOTksOTksMjldLFs4Nl1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjd9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjoxMTN9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CB7dGVtcH0gdGVtcC1tdXV0dHVqYXN0YSB0YXVsdWtrb29uIG9pa2VhbGxlIHBhaWthbGxlLiBUYXVsdWtrbyBvbiBueXQgauRyamVzdGV0dHkgbm9sbGFuIGphIHtpfTpuIHbkbGlsbOQuIiwiMSI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG1zZywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlsbCAmJiB0eXBlb2Ygb3B0aW9ucy5maWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyByZXBsYWNlIHRoZSBsYWJlbHMgaW4gdGhlIHN0cmluZyBpZiB0aGUgcmVwbGFjZW1lbnRzIGFyZSBnaXZlbiBpbiB0aGUgb3B0aW9uc1xuICAgICAgbXNnID0gSlNBVi51dGlscy5yZXBsYWNlTGFiZWxzKG1zZywgb3B0aW9ucy5maWxsKTtcbiAgICB9XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7Y29sb3I6IFwiYmxhY2tcIiwgcHJlc2VydmU6IGZhbHNlfSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMub3V0cHV0KSB7XG4gICAgICBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSAmJiBvcHRzLnByZXNlcnZlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMub3V0cHV0LmZpbmQoXCJkaXY6bGFzdFwiKSxcbiAgICAgICAgICBuZXdtc2cgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmIChlbC5zaXplKCkgPiAwKSB7IC8vIGV4aXN0aW5nIGNvbnRlbnQgaW4gbWVzc2FnZSBvdXRwdXRcbiAgICAgICAgICBlbC5hcHBlbmQobmV3bXNnKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3QgbWVzc2FnZVxuICAgICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSkge1xuICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgLy99IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdnNjcm9sbFwiKSkge1xuICAgICAgfSBlbHNlIHsgLy8gZS5nLiBcImpzYXZzY3JvbGxcIiwgd2hpY2ggaXMgZGVmYXVsdFxuICAgICAgICB0aGlzLm91dHB1dC5hcHBlbmQoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFswXSkge1xuICAgICAgICAgIHRoaXMub3V0cHV0WzBdLnNjcm9sbFRvcCA9IHRoaXMub3V0cHV0WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuanNhdi5SRUNPUkQpIHsgLy8gdHJpZ2dlciBldmVudHMgb25seSBpZiBub3QgcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuY29udGFpbmVyLnRyaWdnZXIoXCJqc2F2LW1lc3NhZ2VcIiwgW21zZywgb3B0aW9uc10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSJ9LHsiYXJncyI6eyIwIjozLCIxIjoianNhdnByZXZpb3VzbGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6NiwiMSI6ImpzYXZwcmV2aW91c2xpbmUganNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo4LCIxIjoianNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9XSwiaHRtbCI6eyJjb3VudGVySFRNTCI6IjM5IC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4gODYgKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4gOCAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiOFwiPjg8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiOFwiPjg8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1sxNCwyNCwyOCwzOCw0MSw0NCw4MCw4Niw5OSwyOV0sWzg2XV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6OX0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJLb3Bpb2kge2Fycl9hdF9pfSB0YXVsdWtvc3RhIHRlbXAtbXV1dHR1amFhbi4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjYsIjEiOiJqc2F2cHJldmlvdXNsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo4LCIxIjoianNhdnByZXZpb3VzbGluZSBqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjMsIjEiOiJqc2F2Y3VycmVudGxpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiNDAgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIDg2IHRlbXAtbXV1dHR1amFzdGEgdGF1bHVra29vbiBvaWtlYWxsZSBwYWlrYWxsZS4gVGF1bHVra28gb24gbnl0IGrkcmplc3RldHR5IG5vbGxhbiBqYSA4Om4gduRsaWxs5C48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiOFwiPjg8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiN1wiPjc8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1sxNCwyNCwyOCwzOCw0MSw0NCw4MCw4Niw5OSwyOV0sWzI5XV0sIm9wZXJhdGlvbnMiOlt7ImFyZ3MiOnsiMCI6OX0sImVmZmVjdCI6ImZ1bmN0aW9uKG5ld1ZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuaHRtbChuZXdWYWx1ZSk7XG4gICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5qc2F2dmFydmFsdWVcIikuYXR0cihcImRhdGEtdmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIFtvbGRWYWx1ZSwgb3B0aW9uc107XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24ob3B0cykge1xuICAgIC8vIGdldCB0aGUgdmFsdWVzIG9mIHRoZSBmcm9tIGFuZCB0byBlbGVtZW50c1xuICAgIHZhciBmcm9tID0gb3B0cy5mcm9tLCAvLyBjYWNoZSB0aGUgdmFsdWVzXG4gICAgICAgIHRvID0gb3B0cy50byxcbiAgICAgICAgdmFsID0gZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxKSxcbiAgICAgICAgb2xkVmFsdWUgPSB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMiksXG4gICAgICAgICRmcm9tVmFsRWxlbSwgJHRvVmFsRWxlbSwgdG9Qb3M7XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBvcmlnaW5hbCBzdHJ1Y3R1cmUgdG8gZW1wdHkgc3RyaW5nIG9yLCBpZiB1bmRvaW5nLCB0aGUgb2xkIHZhbHVlXG4gICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyBvbGRWYWx1ZSwge3JlY29yZDogZmFsc2V9IF0pKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gXCJtb3ZlXCIgfHwgdHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsodHlwZW9mIG9wdHMub2xkICE9PSBcInVuZGVmaW5lZFwiKT9vcHRzLm9sZDpcIlwiLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG4gICAgfVxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIHRhcmdldCBzdHJ1Y3R1cmVcbiAgICB0by52YWx1ZS5hcHBseSh0bywgb3B0cy5hcmdzMi5jb25jYXQoW3ZhbCwge3JlY29yZDogZmFsc2V9XSkpO1xuXG4gICAgLy8gZ2V0IHRoZSBIVE1MIGVsZW1lbnRzIGZvciB0aGUgdmFsdWVzLCBmb3IgYXJyYXlzLCB1c2UgdGhlIGluZGV4XG4gICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MxWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZyb20uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cbiAgICBpZiAodG8uY29uc3RydWN0b3IgPT09IEpTQVYuX3R5cGVzLmRzLkFWQXJyYXkpIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczJbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAodG8uZWxlbWVudC5oYXNDbGFzcyhcImpzYXZsYWJlbFwiKSkgeyAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbGFiZWxzXG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZSgpKSB7ICAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHZhciB0b1ZhbEVsZW1IZWlnaHQgPSAkdG9WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgdmFyIGZyb21WYWxFbGVtSGVpZ2h0ID0gJGZyb21WYWxFbGVtLmhlaWdodCgpOyAvLyBzYXZlZCBpbnRvIGEgdmFyaWFibGUsIGJlY2F1c2UgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHplcm8gYWZ0ZXIgcmVwb3NpdGlvbmluZ1xuICAgICAgJHRvVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICRmcm9tVmFsRWxlbX0pOyAvLyBsZXQganF1ZXJ5VUkgcG9zaXRpb24gaXQgb24gdG9wIG9mIHRoZSBmcm9tIGVsZW1lbnRcbiAgICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICAgIHRvUG9zID0gJC5leHRlbmQoe30sICR0b1ZhbEVsZW0ucG9zaXRpb24oKSk7XG4gICAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgYm90dG9tOiAwLCB0b3A6IFwiXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICAkZnJvbVZhbEVsZW0ucG9zaXRpb24oe29mOiAkdG9WYWxFbGVtfSk7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHRvUG9zKTtcbiAgICAgICAgaWYgKGZyb20ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBib3R0b20gPSAkZnJvbVZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkZnJvbVZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSBmcm9tVmFsRWxlbUhlaWdodDtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBib3R0b20gPSAkdG9WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJHRvVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIHRvVmFsRWxlbUhlaWdodDtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgJHRvVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gXCJyZXZlcnNlZFwiIHBhcmFtZXRlcnMgYW5kIHRoZSBvbGQgdmFsdWUgZm9yIHVuZG9pbmdcbiAgICByZXR1cm4gWyB7XG4gICAgICAgICAgZnJvbTogdG8sXG4gICAgICAgICAgYXJnczE6IG9wdHMuYXJnczIsXG4gICAgICAgICAgdG86IGZyb20sXG4gICAgICAgICAgYXJnczI6IG9wdHMuYXJnczEsXG4gICAgICAgICAgb2xkOiBvbGRWYWx1ZSxcbiAgICAgICAgICBtb2RlOiBvcHRzLm1vZGVcbiAgICAgICAgfSBdO1xuICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSIsIjEiOjEzMH0sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiB7dGVtcH0gKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4ge2l9IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifSx7ImFyZ3MiOnsiMCI6OCwiMSI6ImpzYXZwcmV2aW91c2xpbmUifSwiZWZmZWN0IjoiZnVuY3Rpb24obGluZW51bSwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgdmFyICRlbGVtcyA9IGdldENvZGVMaW5lRWxlbWVudHModGhpcywgbGluZW51bSk7XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy5fdG9nZ2xlQ2xhc3MoJGVsZW1zLCBjbGFzc05hbWUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lbnVtLCBjbGFzc05hbWVdO1xuICB9In0seyJhcmdzIjp7IjAiOjMsIjEiOiJqc2F2cHJldmlvdXNsaW5lIGpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6NiwiMSI6ImpzYXZjdXJyZW50bGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiI0MSAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5Lb3Bpb2kgMjkgdGF1bHVrb3N0YSB0ZW1wLW11dXR0dWphYW4uPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjlcIj45PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjdcIj43PC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbMTQsMjQsMjgsMzgsNDEsNDQsODAsODYsOTksOTldLFsyOV1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjh9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjoxMTN9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In0seyJhcmdzIjp7IjAiOjMsIjEiOiJqc2F2cHJldmlvdXNsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo2LCIxIjoianNhdnByZXZpb3VzbGluZSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihsaW5lbnVtLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgJGVsZW1zID0gZ2V0Q29kZUxpbmVFbGVtZW50cyh0aGlzLCBsaW5lbnVtKTtcbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLl90b2dnbGVDbGFzcygkZWxlbXMsIGNsYXNzTmFtZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtcy50b2dnbGVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2xpbmVudW0sIGNsYXNzTmFtZV07XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiI0MiAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIDI5ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIDkgKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjlcIj45PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjlcIj45PC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzE0LDI0LDI4LDM4LDQxLDQ0LDgwLDg2LDg2LDk5XSxbMjldXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjo3fSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6MTA1fSwiZWZmZWN0IjoiZnVuY3Rpb24oZWxlbSwgbmV3SGVpZ2h0LCBvcHRpb25zKSB7XG4gICAgICAvLyB0aGUgSlNBVi5hbmltIHdyYXBwZXIgd2lsbCBtYWtlIHN1cmUgdGhpcyBwb2ludHMgdG8ganNhdiBpbnN0YW5jZVxuICAgICAgdmFyIG9sZEhlaWdodCA9IGVsZW0uaGVpZ2h0KCk7XG4gICAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHtcbiAgICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbihlbGVtLCB7aGVpZ2h0OiBuZXdIZWlnaHR9LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0uY3NzKHtoZWlnaHQ6IG5ld0hlaWdodH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtlbGVtLCBvbGRIZWlnaHRdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGNzc3Byb3BzLCBvcHRpb25zKSB7XG4gICAgdmFyIG9sZFByb3BzID0gJC5leHRlbmQodHJ1ZSwge30sIGNzc3Byb3BzKSxcbiAgICAgICAgZWwgPSB0aGlzLmVsZW1lbnQ7XG4gICAgaWYgKHR5cGVvZiBjc3Nwcm9wcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIFtjc3Nwcm9wc107XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgaW4gY3NzcHJvcHMpIHtcbiAgICAgICAgaWYgKGNzc3Byb3BzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgb2xkUHJvcHNbaV0gPSBlbC5jc3MoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7IC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMudHJhbnNpdGlvbih0aGlzLmVsZW1lbnQsIGNzc3Byb3BzLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LmNzcyhjc3Nwcm9wcyk7XG4gICAgfVxuICAgIHJldHVybiBbb2xkUHJvcHNdO1xuICB9In0seyJhcmdzIjp7IjAiOiJTaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIHt0ZW1wfSAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiB7aX0gKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuIiwiMSI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG1zZywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlsbCAmJiB0eXBlb2Ygb3B0aW9ucy5maWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyByZXBsYWNlIHRoZSBsYWJlbHMgaW4gdGhlIHN0cmluZyBpZiB0aGUgcmVwbGFjZW1lbnRzIGFyZSBnaXZlbiBpbiB0aGUgb3B0aW9uc1xuICAgICAgbXNnID0gSlNBVi51dGlscy5yZXBsYWNlTGFiZWxzKG1zZywgb3B0aW9ucy5maWxsKTtcbiAgICB9XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7Y29sb3I6IFwiYmxhY2tcIiwgcHJlc2VydmU6IGZhbHNlfSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMub3V0cHV0KSB7XG4gICAgICBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSAmJiBvcHRzLnByZXNlcnZlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMub3V0cHV0LmZpbmQoXCJkaXY6bGFzdFwiKSxcbiAgICAgICAgICBuZXdtc2cgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmIChlbC5zaXplKCkgPiAwKSB7IC8vIGV4aXN0aW5nIGNvbnRlbnQgaW4gbWVzc2FnZSBvdXRwdXRcbiAgICAgICAgICBlbC5hcHBlbmQobmV3bXNnKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3QgbWVzc2FnZVxuICAgICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSkge1xuICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgLy99IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdnNjcm9sbFwiKSkge1xuICAgICAgfSBlbHNlIHsgLy8gZS5nLiBcImpzYXZzY3JvbGxcIiwgd2hpY2ggaXMgZGVmYXVsdFxuICAgICAgICB0aGlzLm91dHB1dC5hcHBlbmQoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFswXSkge1xuICAgICAgICAgIHRoaXMub3V0cHV0WzBdLnNjcm9sbFRvcCA9IHRoaXMub3V0cHV0WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuanNhdi5SRUNPUkQpIHsgLy8gdHJpZ2dlciBldmVudHMgb25seSBpZiBub3QgcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuY29udGFpbmVyLnRyaWdnZXIoXCJqc2F2LW1lc3NhZ2VcIiwgW21zZywgb3B0aW9uc10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSJ9XSwiaHRtbCI6eyJjb3VudGVySFRNTCI6IjQzIC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4gMjkgKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4gOSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiOVwiPjk8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiOFwiPjg8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZSBqc2F2cHJldmlvdXNsaW5lXCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+In19LHsiZGF0YVN0cnVjdHVyZXMiOltbMTQsMjQsMjgsMzgsNDEsNDQsODAsODAsODYsOTldLFsyOV1dLCJvcGVyYXRpb25zIjpbeyJhcmdzIjp7IjAiOjZ9LCJlZmZlY3QiOiJmdW5jdGlvbihuZXdWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmh0bWwobmV3VmFsdWUpO1xuICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuanNhdnZhcnZhbHVlXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBbb2xkVmFsdWUsIG9wdGlvbnNdO1xuICAgIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG9wdHMpIHtcbiAgICAvLyBnZXQgdGhlIHZhbHVlcyBvZiB0aGUgZnJvbSBhbmQgdG8gZWxlbWVudHNcbiAgICB2YXIgZnJvbSA9IG9wdHMuZnJvbSwgLy8gY2FjaGUgdGhlIHZhbHVlc1xuICAgICAgICB0byA9IG9wdHMudG8sXG4gICAgICAgIHZhbCA9IGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMSksXG4gICAgICAgIG9sZFZhbHVlID0gdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIpLFxuICAgICAgICAkZnJvbVZhbEVsZW0sICR0b1ZhbEVsZW0sIHRvUG9zO1xuICAgIC8vIHNldCB0aGUgdmFsdWUgaW4gb3JpZ2luYWwgc3RydWN0dXJlIHRvIGVtcHR5IHN0cmluZyBvciwgaWYgdW5kb2luZywgdGhlIG9sZCB2YWx1ZVxuICAgIGlmIChvcHRzLm1vZGUgPT09IFwic3dhcFwiKSB7XG4gICAgICBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEuY29uY2F0KFsgb2xkVmFsdWUsIHtyZWNvcmQ6IGZhbHNlfSBdKSk7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09IFwibW92ZVwiIHx8IHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbKHR5cGVvZiBvcHRzLm9sZCAhPT0gXCJ1bmRlZmluZWRcIik/b3B0cy5vbGQ6XCJcIiwge3JlY29yZDogZmFsc2V9XSkpO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgc3RydWN0dXJlXG4gICAgdG8udmFsdWUuYXBwbHkodG8sIG9wdHMuYXJnczIuY29uY2F0KFt2YWwsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcblxuICAgIC8vIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhlIHZhbHVlcywgZm9yIGFycmF5cywgdXNlIHRoZSBpbmRleFxuICAgIGlmIChmcm9tLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMVswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmIChmcm9tLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkZnJvbVZhbEVsZW0gPSBmcm9tLmVsZW1lbnQuZmluZChcIi5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9XG4gICAgaWYgKHRvLmNvbnN0cnVjdG9yID09PSBKU0FWLl90eXBlcy5kcy5BVkFycmF5KSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwibGk6ZXEoXCIgKyBvcHRzLmFyZ3MyWzBdICsgXCIpIC5qc2F2dmFsdWVsYWJlbFwiKTtcbiAgICB9IGVsc2UgaWYgKHRvLmVsZW1lbnQuaGFzQ2xhc3MoXCJqc2F2bGFiZWxcIikpIHsgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxhYmVsc1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFuaW1hdGUoKSkgeyAgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB2YXIgdG9WYWxFbGVtSGVpZ2h0ID0gJHRvVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgIHZhciBmcm9tVmFsRWxlbUhlaWdodCA9ICRmcm9tVmFsRWxlbS5oZWlnaHQoKTsgLy8gc2F2ZWQgaW50byBhIHZhcmlhYmxlLCBiZWNhdXNlIHRoZSBjb21wdXRlZCB2YWx1ZSBpcyB6ZXJvIGFmdGVyIHJlcG9zaXRpb25pbmdcbiAgICAgICR0b1ZhbEVsZW0ucG9zaXRpb24oe29mOiAkZnJvbVZhbEVsZW19KTsgLy8gbGV0IGpxdWVyeVVJIHBvc2l0aW9uIGl0IG9uIHRvcCBvZiB0aGUgZnJvbSBlbGVtZW50XG4gICAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgICB0b1BvcyA9ICQuZXh0ZW5kKHt9LCAkdG9WYWxFbGVtLnBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAodG8ub3B0aW9ucy5sYXlvdXQgIT09IFwiYmFyXCIpIHtcbiAgICAgICAgICAkdG9WYWxFbGVtLmNzcyh7bGVmdDogMCwgdG9wOiAwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIGJvdHRvbTogMCwgdG9wOiBcIlwifSk7XG4gICAgICAgIH1cbiAgICAgICAgJGZyb21WYWxFbGVtLnBvc2l0aW9uKHtvZjogJHRvVmFsRWxlbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh0b1Bvcyk7XG4gICAgICAgIGlmIChmcm9tLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYm90dG9tID0gJGZyb21WYWxFbGVtLnBhcmVudCgpLmhlaWdodCgpIC0gJGZyb21WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gZnJvbVZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICAgJGZyb21WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCBib3R0b206IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7IC8vIGFuaW1hdGUgdG8gZmluYWwgcG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgdG9wOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm90dG9tID0gJHRvVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICR0b1ZhbEVsZW0ucG9zaXRpb24oKS50b3AgLSB0b1ZhbEVsZW1IZWlnaHQ7XG4gICAgICAgICR0b1ZhbEVsZW0uY3NzKHt0b3A6IFwiXCIsIGJvdHRvbTogYm90dG9tfSk7XG4gICAgICAgICR0b1ZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwicmV2ZXJzZWRcIiBwYXJhbWV0ZXJzIGFuZCB0aGUgb2xkIHZhbHVlIGZvciB1bmRvaW5nXG4gICAgcmV0dXJuIFsge1xuICAgICAgICAgIGZyb206IHRvLFxuICAgICAgICAgIGFyZ3MxOiBvcHRzLmFyZ3MyLFxuICAgICAgICAgIHRvOiBmcm9tLFxuICAgICAgICAgIGFyZ3MyOiBvcHRzLmFyZ3MxLFxuICAgICAgICAgIG9sZDogb2xkVmFsdWUsXG4gICAgICAgICAgbW9kZTogb3B0cy5tb2RlXG4gICAgICAgIH0gXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0iLCIxIjo1OH0sImVmZmVjdCI6ImZ1bmN0aW9uKGVsZW0sIG5ld0hlaWdodCwgb3B0aW9ucykge1xuICAgICAgLy8gdGhlIEpTQVYuYW5pbSB3cmFwcGVyIHdpbGwgbWFrZSBzdXJlIHRoaXMgcG9pbnRzIHRvIGpzYXYgaW5zdGFuY2VcbiAgICAgIHZhciBvbGRIZWlnaHQgPSBlbGVtLmhlaWdodCgpO1xuICAgICAgaWYgKHRoaXMuanNhdi5fc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24oZWxlbSwge2hlaWdodDogbmV3SGVpZ2h0fSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmNzcyh7aGVpZ2h0OiBuZXdIZWlnaHR9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZWxlbSwgb2xkSGVpZ2h0XTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihjc3Nwcm9wcywgb3B0aW9ucykge1xuICAgIHZhciBvbGRQcm9wcyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjc3Nwcm9wcyksXG4gICAgICAgIGVsID0gdGhpcy5lbGVtZW50O1xuICAgIGlmICh0eXBlb2YgY3NzcHJvcHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBbY3NzcHJvcHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpIGluIGNzc3Byb3BzKSB7XG4gICAgICAgIGlmIChjc3Nwcm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIG9sZFByb3BzW2ldID0gZWwuY3NzKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkgeyAvLyBvbmx5IGFuaW1hdGUgd2hlbiBwbGF5aW5nLCBub3Qgd2hlbiByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5lZmZlY3RzLnRyYW5zaXRpb24odGhpcy5lbGVtZW50LCBjc3Nwcm9wcywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jc3MoY3NzcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gW29sZFByb3BzXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjoiU2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiB7dGVtcH0gKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4ge2l9IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLiIsIjEiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihtc2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGwgJiYgdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgLy8gcmVwbGFjZSB0aGUgbGFiZWxzIGluIHRoZSBzdHJpbmcgaWYgdGhlIHJlcGxhY2VtZW50cyBhcmUgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcbiAgICAgIG1zZyA9IEpTQVYudXRpbHMucmVwbGFjZUxhYmVscyhtc2csIG9wdGlvbnMuZmlsbCk7XG4gICAgfVxuICAgIHZhciBvcHRzID0gJC5leHRlbmQoe2NvbG9yOiBcImJsYWNrXCIsIHByZXNlcnZlOiBmYWxzZX0sIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm91dHB1dCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikgJiYgb3B0cy5wcmVzZXJ2ZSkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm91dHB1dC5maW5kKFwiZGl2Omxhc3RcIiksXG4gICAgICAgICAgbmV3bXNnID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9zcGFuPlwiO1xuICAgICAgICBpZiAoZWwuc2l6ZSgpID4gMCkgeyAvLyBleGlzdGluZyBjb250ZW50IGluIG1lc3NhZ2Ugb3V0cHV0XG4gICAgICAgICAgZWwuYXBwZW5kKG5ld21zZyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IG1lc3NhZ2VcbiAgICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdmxpbmVcIikpIHtcbiAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgIC8vfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZzY3JvbGxcIikpIHtcbiAgICAgIH0gZWxzZSB7IC8vIGUuZy4gXCJqc2F2c2Nyb2xsXCIsIHdoaWNoIGlzIGRlZmF1bHRcbiAgICAgICAgdGhpcy5vdXRwdXQuYXBwZW5kKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRbMF0pIHtcbiAgICAgICAgICB0aGlzLm91dHB1dFswXS5zY3JvbGxUb3AgPSB0aGlzLm91dHB1dFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmpzYXYuUkVDT1JEKSB7IC8vIHRyaWdnZXIgZXZlbnRzIG9ubHkgaWYgbm90IHJlY29yZGluZ1xuICAgICAgdGhpcy5qc2F2LmNvbnRhaW5lci50cmlnZ2VyKFwianNhdi1tZXNzYWdlXCIsIFttc2csIG9wdGlvbnNdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0ifV0sImh0bWwiOnsiY291bnRlckhUTUwiOiI0NCAvIDQ4Iiwib3V0cHV0SFRNTCI6IjxkaXYgc3R5bGU9XCJjb2xvcjpibGFjaztcIj5TaWlycuQga2Fpa2tpYSBhbGtpb2l0YSBqb2lkZW4gYXJ2byBvbiBzdXVyZW1waSBrdWluIDI5ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIDkgKGkpLCB5aGRlbGzkIGFza2VsZWVsbGEgb2lrZWFsbGUuPC9kaXY+IiwiY2FudmFzSFRNTCI6IjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmk6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjlcIj45PC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7IHRvcDogNjBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPmo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjdcIj43PC9zcGFuPjwvc3Bhbj48L2Rpdj48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzE0LDI0LDI4LDM4LDQxLDQ0LDQ0LDgwLDg2LDk5XSxbMjldXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjo1fSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6NTR9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiNDUgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiAyOSAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiA5IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI5XCI+OTwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI2XCI+Njwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzE0LDI0LDI4LDM4LDQxLDQxLDQ0LDgwLDg2LDk5XSxbMjldXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjo0fSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6NTB9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4ge3RlbXB9ICh0ZW1wKSBqYSBqb2lkZW4gaW5kZWtzaSBvbiBwaWVuZW1waSBrdWluIHtpfSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS4iLCIxIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24obXNnLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxsICYmIHR5cGVvZiBvcHRpb25zLmZpbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIGxhYmVscyBpbiB0aGUgc3RyaW5nIGlmIHRoZSByZXBsYWNlbWVudHMgYXJlIGdpdmVuIGluIHRoZSBvcHRpb25zXG4gICAgICBtc2cgPSBKU0FWLnV0aWxzLnJlcGxhY2VMYWJlbHMobXNnLCBvcHRpb25zLmZpbGwpO1xuICAgIH1cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHtjb2xvcjogXCJibGFja1wiLCBwcmVzZXJ2ZTogZmFsc2V9LCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5vdXRwdXQpIHtcbiAgICAgIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpICYmIG9wdHMucHJlc2VydmUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5vdXRwdXQuZmluZChcImRpdjpsYXN0XCIpLFxuICAgICAgICAgIG5ld21zZyA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgaWYgKGVsLnNpemUoKSA+IDApIHsgLy8gZXhpc3RpbmcgY29udGVudCBpbiBtZXNzYWdlIG91dHB1dFxuICAgICAgICAgIGVsLmFwcGVuZChuZXdtc2cpO1xuICAgICAgICB9IGVsc2UgeyAvLyBmaXJzdCBtZXNzYWdlXG4gICAgICAgICAgdGhpcy5vdXRwdXQuaHRtbChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm91dHB1dC5oYXNDbGFzcyhcImpzYXZsaW5lXCIpKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAvL30gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2c2Nyb2xsXCIpKSB7XG4gICAgICB9IGVsc2UgeyAvLyBlLmcuIFwianNhdnNjcm9sbFwiLCB3aGljaCBpcyBkZWZhdWx0XG4gICAgICAgIHRoaXMub3V0cHV0LmFwcGVuZChcIjxkaXYgc3R5bGU9J2NvbG9yOlwiICsgb3B0cy5jb2xvciArIFwiOyc+XCIgKyBtc2cgKyBcIjwvZGl2PlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0WzBdKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXRbMF0uc2Nyb2xsVG9wID0gdGhpcy5vdXRwdXRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5qc2F2LlJFQ09SRCkgeyAvLyB0cmlnZ2VyIGV2ZW50cyBvbmx5IGlmIG5vdCByZWNvcmRpbmdcbiAgICAgIHRoaXMuanNhdi5jb250YWluZXIudHJpZ2dlcihcImpzYXYtbWVzc2FnZVwiLCBbbXNnLCBvcHRpb25zXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9In1dLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiNDYgLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIGthaWtraWEgYWxraW9pdGEgam9pZGVuIGFydm8gb24gc3V1cmVtcGkga3VpbiAyOSAodGVtcCkgamEgam9pZGVuIGluZGVrc2kgb24gcGllbmVtcGkga3VpbiA5IChpKSwgeWhkZWxs5CBhc2tlbGVlbGxhIG9pa2VhbGxlLjwvZGl2PiIsImNhbnZhc0hUTUwiOiI8ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI5XCI+OTwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4OyB0b3A6IDYwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj5qOjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCI1XCI+NTwvc3Bhbj48L3NwYW4+PC9kaXY+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2Y3VycmVudGxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPiJ9fSx7ImRhdGFTdHJ1Y3R1cmVzIjpbWzE0LDI0LDI4LDM4LDM4LDQxLDQ0LDgwLDg2LDk5XSxbMjldXSwib3BlcmF0aW9ucyI6W3siYXJncyI6eyIwIjozfSwiZWZmZWN0IjoiZnVuY3Rpb24obmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5odG1sKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmpzYXZ2YXJ2YWx1ZVwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gW29sZFZhbHVlLCBvcHRpb25zXTtcbiAgICB9In0seyJhcmdzIjp7IjAiOiJDb252ZXJ0ZWQgdG8gc3RyaW5nIHdoZW4gcmVjb3JkaW5nIHRvIGF2b2lkIGN5Y2xpYyBvYmplY3QgdmFsdWU6IFtvYmplY3QgT2JqZWN0XSJ9LCJlZmZlY3QiOiJmdW5jdGlvbihvcHRzKSB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZXMgb2YgdGhlIGZyb20gYW5kIHRvIGVsZW1lbnRzXG4gICAgdmFyIGZyb20gPSBvcHRzLmZyb20sIC8vIGNhY2hlIHRoZSB2YWx1ZXNcbiAgICAgICAgdG8gPSBvcHRzLnRvLFxuICAgICAgICB2YWwgPSBmcm9tLnZhbHVlLmFwcGx5KGZyb20sIG9wdHMuYXJnczEpLFxuICAgICAgICBvbGRWYWx1ZSA9IHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyKSxcbiAgICAgICAgJGZyb21WYWxFbGVtLCAkdG9WYWxFbGVtLCB0b1BvcztcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIG9yaWdpbmFsIHN0cnVjdHVyZSB0byBlbXB0eSBzdHJpbmcgb3IsIGlmIHVuZG9pbmcsIHRoZSBvbGQgdmFsdWVcbiAgICBpZiAob3B0cy5tb2RlID09PSBcInN3YXBcIikge1xuICAgICAgZnJvbS52YWx1ZS5hcHBseShmcm9tLCBvcHRzLmFyZ3MxLmNvbmNhdChbIG9sZFZhbHVlLCB7cmVjb3JkOiBmYWxzZX0gXSkpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSBcIm1vdmVcIiB8fCB0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZyb20udmFsdWUuYXBwbHkoZnJvbSwgb3B0cy5hcmdzMS5jb25jYXQoWyh0eXBlb2Ygb3B0cy5vbGQgIT09IFwidW5kZWZpbmVkXCIpP29wdHMub2xkOlwiXCIsIHtyZWNvcmQ6IGZhbHNlfV0pKTtcbiAgICB9XG4gICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGFyZ2V0IHN0cnVjdHVyZVxuICAgIHRvLnZhbHVlLmFwcGx5KHRvLCBvcHRzLmFyZ3MyLmNvbmNhdChbdmFsLCB7cmVjb3JkOiBmYWxzZX1dKSk7XG5cbiAgICAvLyBnZXQgdGhlIEhUTUwgZWxlbWVudHMgZm9yIHRoZSB2YWx1ZXMsIGZvciBhcnJheXMsIHVzZSB0aGUgaW5kZXhcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCJsaTplcShcIiArIG9wdHMuYXJnczFbMF0gKyBcIikgLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH0gZWxzZSBpZiAoZnJvbS5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICRmcm9tVmFsRWxlbSA9IGZyb20uZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGZyb21WYWxFbGVtID0gZnJvbS5lbGVtZW50LmZpbmQoXCIuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfVxuICAgIGlmICh0by5jb25zdHJ1Y3RvciA9PT0gSlNBVi5fdHlwZXMuZHMuQVZBcnJheSkge1xuICAgICAgJHRvVmFsRWxlbSA9IHRvLmVsZW1lbnQuZmluZChcImxpOmVxKFwiICsgb3B0cy5hcmdzMlswXSArIFwiKSAuanNhdnZhbHVlbGFiZWxcIik7XG4gICAgfSBlbHNlIGlmICh0by5lbGVtZW50Lmhhc0NsYXNzKFwianNhdmxhYmVsXCIpKSB7IC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsYWJlbHNcbiAgICAgICR0b1ZhbEVsZW0gPSB0by5lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAkdG9WYWxFbGVtID0gdG8uZWxlbWVudC5maW5kKFwiLmpzYXZ2YWx1ZWxhYmVsXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKCkpIHsgIC8vIG9ubHkgYW5pbWF0ZSB3aGVuIHBsYXlpbmcsIG5vdCB3aGVuIHJlY29yZGluZ1xuICAgICAgdmFyIHRvVmFsRWxlbUhlaWdodCA9ICR0b1ZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICB2YXIgZnJvbVZhbEVsZW1IZWlnaHQgPSAkZnJvbVZhbEVsZW0uaGVpZ2h0KCk7IC8vIHNhdmVkIGludG8gYSB2YXJpYWJsZSwgYmVjYXVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgaXMgemVybyBhZnRlciByZXBvc2l0aW9uaW5nXG4gICAgICAkdG9WYWxFbGVtLnBvc2l0aW9uKHtvZjogJGZyb21WYWxFbGVtfSk7IC8vIGxldCBqcXVlcnlVSSBwb3NpdGlvbiBpdCBvbiB0b3Agb2YgdGhlIGZyb20gZWxlbWVudFxuICAgICAgaWYgKG9wdHMubW9kZSA9PT0gXCJzd2FwXCIpIHtcbiAgICAgICAgdG9Qb3MgPSAkLmV4dGVuZCh7fSwgJHRvVmFsRWxlbS5wb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHRvLm9wdGlvbnMubGF5b3V0ICE9PSBcImJhclwiKSB7XG4gICAgICAgICAgJHRvVmFsRWxlbS5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0b1ZhbEVsZW0uY3NzKHtsZWZ0OiAwLCBib3R0b206IDAsIHRvcDogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgICRmcm9tVmFsRWxlbS5wb3NpdGlvbih7b2Y6ICR0b1ZhbEVsZW19KTtcbiAgICAgICAgJHRvVmFsRWxlbS5jc3ModG9Qb3MpO1xuICAgICAgICBpZiAoZnJvbS5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAgICRmcm9tVmFsRWxlbS50cmFuc2l0aW9uKHtsZWZ0OiAwLCB0b3A6IDB9LCB0aGlzLlNQRUVELCAnbGluZWFyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICRmcm9tVmFsRWxlbS5wYXJlbnQoKS5oZWlnaHQoKSAtICRmcm9tVmFsRWxlbS5wb3NpdGlvbigpLnRvcCAtIGZyb21WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAgICRmcm9tVmFsRWxlbS5jc3Moe3RvcDogXCJcIiwgYm90dG9tOiBib3R0b219KTtcbiAgICAgICAgICAkZnJvbVZhbEVsZW0udHJhbnNpdGlvbih7bGVmdDogMCwgYm90dG9tOiAwfSwgdGhpcy5TUEVFRCwgJ2xpbmVhcicpOyAvLyBhbmltYXRlIHRvIGZpbmFsIHBvc2l0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0by5vcHRpb25zLmxheW91dCAhPT0gXCJiYXJcIikge1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIHRvcDogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJvdHRvbSA9ICR0b1ZhbEVsZW0ucGFyZW50KCkuaGVpZ2h0KCkgLSAkdG9WYWxFbGVtLnBvc2l0aW9uKCkudG9wIC0gdG9WYWxFbGVtSGVpZ2h0O1xuICAgICAgICAkdG9WYWxFbGVtLmNzcyh7dG9wOiBcIlwiLCBib3R0b206IGJvdHRvbX0pO1xuICAgICAgICAkdG9WYWxFbGVtLnRyYW5zaXRpb24oe2xlZnQ6IDAsIGJvdHRvbTogMH0sIHRoaXMuU1BFRUQsICdsaW5lYXInKTsgLy8gYW5pbWF0ZSB0byBmaW5hbCBwb3NpdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBcInJldmVyc2VkXCIgcGFyYW1ldGVycyBhbmQgdGhlIG9sZCB2YWx1ZSBmb3IgdW5kb2luZ1xuICAgIHJldHVybiBbIHtcbiAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICBhcmdzMTogb3B0cy5hcmdzMixcbiAgICAgICAgICB0bzogZnJvbSxcbiAgICAgICAgICBhcmdzMjogb3B0cy5hcmdzMSxcbiAgICAgICAgICBvbGQ6IG9sZFZhbHVlLFxuICAgICAgICAgIG1vZGU6IG9wdHMubW9kZVxuICAgICAgICB9IF07XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIiwiMSI6Mzh9LCJlZmZlY3QiOiJmdW5jdGlvbihlbGVtLCBuZXdIZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHRoZSBKU0FWLmFuaW0gd3JhcHBlciB3aWxsIG1ha2Ugc3VyZSB0aGlzIHBvaW50cyB0byBqc2F2IGluc3RhbmNlXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gZWxlbS5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKGVsZW0sIHtoZWlnaHQ6IG5ld0hlaWdodH0sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jc3Moe2hlaWdodDogbmV3SGVpZ2h0fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2VsZW0sIG9sZEhlaWdodF07XG4gICAgfSJ9LHsiYXJncyI6eyIwIjoiQ29udmVydGVkIHRvIHN0cmluZyB3aGVuIHJlY29yZGluZyB0byBhdm9pZCBjeWNsaWMgb2JqZWN0IHZhbHVlOiBbb2JqZWN0IE9iamVjdF0ifSwiZWZmZWN0IjoiZnVuY3Rpb24oY3NzcHJvcHMsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2xkUHJvcHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgY3NzcHJvcHMpLFxuICAgICAgICBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICBpZiAodHlwZW9mIGNzc3Byb3BzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gW2Nzc3Byb3BzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSBpbiBjc3Nwcm9wcykge1xuICAgICAgICBpZiAoY3NzcHJvcHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBvbGRQcm9wc1tpXSA9IGVsLmNzcyhpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5qc2F2Ll9zaG91bGRBbmltYXRlKCkpIHsgLy8gb25seSBhbmltYXRlIHdoZW4gcGxheWluZywgbm90IHdoZW4gcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuZWZmZWN0cy50cmFuc2l0aW9uKHRoaXMuZWxlbWVudCwgY3NzcHJvcHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY3NzKGNzc3Byb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIFtvbGRQcm9wc107XG4gIH0ifSx7ImFyZ3MiOnsiMCI6IlNpaXJy5CB7dGVtcH0gdGVtcC1tdXV0dHVqYXN0YSB0YXVsdWtrb29uIG9pa2VhbGxlIHBhaWthbGxlLiBUYXVsdWtrbyBvbiBueXQgauRyamVzdGV0dHkgbm9sbGFuIGphIHtpfTpuIHbkbGlsbOQuIiwiMSI6IkNvbnZlcnRlZCB0byBzdHJpbmcgd2hlbiByZWNvcmRpbmcgdG8gYXZvaWQgY3ljbGljIG9iamVjdCB2YWx1ZTogW29iamVjdCBPYmplY3RdIn0sImVmZmVjdCI6ImZ1bmN0aW9uKG1zZywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlsbCAmJiB0eXBlb2Ygb3B0aW9ucy5maWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyByZXBsYWNlIHRoZSBsYWJlbHMgaW4gdGhlIHN0cmluZyBpZiB0aGUgcmVwbGFjZW1lbnRzIGFyZSBnaXZlbiBpbiB0aGUgb3B0aW9uc1xuICAgICAgbXNnID0gSlNBVi51dGlscy5yZXBsYWNlTGFiZWxzKG1zZywgb3B0aW9ucy5maWxsKTtcbiAgICB9XG4gICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7Y29sb3I6IFwiYmxhY2tcIiwgcHJlc2VydmU6IGZhbHNlfSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMub3V0cHV0KSB7XG4gICAgICBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSAmJiBvcHRzLnByZXNlcnZlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMub3V0cHV0LmZpbmQoXCJkaXY6bGFzdFwiKSxcbiAgICAgICAgICBuZXdtc2cgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmIChlbC5zaXplKCkgPiAwKSB7IC8vIGV4aXN0aW5nIGNvbnRlbnQgaW4gbWVzc2FnZSBvdXRwdXRcbiAgICAgICAgICBlbC5hcHBlbmQobmV3bXNnKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3QgbWVzc2FnZVxuICAgICAgICAgIHRoaXMub3V0cHV0Lmh0bWwoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vdXRwdXQuaGFzQ2xhc3MoXCJqc2F2bGluZVwiKSkge1xuICAgICAgICB0aGlzLm91dHB1dC5odG1sKFwiPGRpdiBzdHlsZT0nY29sb3I6XCIgKyBvcHRzLmNvbG9yICsgXCI7Jz5cIiArIG1zZyArIFwiPC9kaXY+XCIpO1xuICAgICAgLy99IGVsc2UgaWYgKHRoaXMub3V0cHV0Lmhhc0NsYXNzKFwianNhdnNjcm9sbFwiKSkge1xuICAgICAgfSBlbHNlIHsgLy8gZS5nLiBcImpzYXZzY3JvbGxcIiwgd2hpY2ggaXMgZGVmYXVsdFxuICAgICAgICB0aGlzLm91dHB1dC5hcHBlbmQoXCI8ZGl2IHN0eWxlPSdjb2xvcjpcIiArIG9wdHMuY29sb3IgKyBcIjsnPlwiICsgbXNnICsgXCI8L2Rpdj5cIik7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFswXSkge1xuICAgICAgICAgIHRoaXMub3V0cHV0WzBdLnNjcm9sbFRvcCA9IHRoaXMub3V0cHV0WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuanNhdi5SRUNPUkQpIHsgLy8gdHJpZ2dlciBldmVudHMgb25seSBpZiBub3QgcmVjb3JkaW5nXG4gICAgICB0aGlzLmpzYXYuY29udGFpbmVyLnRyaWdnZXIoXCJqc2F2LW1lc3NhZ2VcIiwgW21zZywgb3B0aW9uc10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSJ9LHsiYXJncyI6eyIwIjo2LCIxIjoianNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9LHsiYXJncyI6eyIwIjo4LCIxIjoianNhdmN1cnJlbnRsaW5lIn0sImVmZmVjdCI6ImZ1bmN0aW9uKGxpbmVudW0sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgIHZhciAkZWxlbXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKHRoaXMsIGxpbmVudW0pO1xuICAgIGlmICh0aGlzLmpzYXYuX3Nob3VsZEFuaW1hdGUoKSkge1xuICAgICAgdGhpcy5qc2F2LmVmZmVjdHMuX3RvZ2dsZUNsYXNzKCRlbGVtcywgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW1zLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBbbGluZW51bSwgY2xhc3NOYW1lXTtcbiAgfSJ9XSwiaHRtbCI6eyJjb3VudGVySFRNTCI6IjQ3IC8gNDgiLCJvdXRwdXRIVE1MIjoiPGRpdiBzdHlsZT1cImNvbG9yOmJsYWNrO1wiPlNpaXJy5CBrYWlra2lhIGFsa2lvaXRhIGpvaWRlbiBhcnZvIG9uIHN1dXJlbXBpIGt1aW4gMjkgKHRlbXApIGphIGpvaWRlbiBpbmRla3NpIG9uIHBpZW5lbXBpIGt1aW4gOSAoaSksIHloZGVsbOQgYXNrZWxlZWxsYSBvaWtlYWxsZS48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiOVwiPjk8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiNFwiPjQ8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmN1cnJlbnRsaW5lIGpzYXZwcmV2aW91c2xpbmVcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX0seyJkYXRhU3RydWN0dXJlcyI6W1sxNCwyNCwyOCwyOSwzOCw0MSw0NCw4MCw4Niw5OV0sWzI5XV0sIm9wZXJhdGlvbnMiOltdLCJodG1sIjp7ImNvdW50ZXJIVE1MIjoiNDggLyA0OCIsIm91dHB1dEhUTUwiOiI8ZGl2IHN0eWxlPVwiY29sb3I6YmxhY2s7XCI+U2lpcnLkIDI5IHRlbXAtbXV1dHR1amFzdGEgdGF1bHVra29vbiBvaWtlYWxsZSBwYWlrYWxsZS4gVGF1bHVra28gb24gbnl0IGrkcmplc3RldHR5IG5vbGxhbiBqYSA5Om4gduRsaWxs5C48L2Rpdj4iLCJjYW52YXNIVE1MIjoiPGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+aTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiOVwiPjk8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTBweDsgdG9wOiA2MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+ajo8L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiM1wiPjM8L3NwYW4+PC9zcGFuPjwvZGl2PjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdnByZXZpb3VzbGluZVwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZjdXJyZW50bGluZVwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD4ifX1dfX0sImluaXRpYWxTdGF0ZSI6eyJkYXRhU3RydWN0dXJlcyI6W3sidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTIzNzA2NDJhZGY3MDQ2ZmY4OGQwOTQyMWQxNzE3M2VkIiwidmFsdWVzIjpbNDQsODAsNDEsMjgsOTksMzgsMjQsMTQsODYsMjldfSx7InR5cGUiOiJhcnJheSIsImlkIjoianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MiIsInZhbHVlcyI6WzE1XX1dLCJhbmltYXRpb25IVE1MIjoiXG4gICAgPGgxIGNsYXNzPVwiZXhlcmNpc2VUaXRsZVwiPkxpc+R5c2rkcmplc3TkbWluZW48L2gxPlxuICAgIDxwIGNsYXNzPVwiaW5zdHJ1Y3RMYWJlbFwiPk9oamVldDo8L3A+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdGlvbnNcIj5Tb3ZlbGxhIGxpc+R5c2rkcmplc3TkbWlzdOQgKGluc2VydGlvbiBzb3J0KSBvaGVpc2VlbiB0YXVsdWtrb29uLiBBcnZvamEgdm9pIGtvcGlvaWRhIHBhaWthc3RhIHRvaXNlZW4ga2xpa2thYW1hbGxhLjwvcD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD5cbiAgICA8cCBjbGFzcz1cImpzYXZleGVyY2lzZWNvbnRyb2xzXCIgYWxpZ249XCJjZW50ZXJcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJ1bmRvXCIgdmFsdWU9XCJLdW1vYVwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInJlc2V0XCIgdmFsdWU9XCJVdWRlbGxlZW5cIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJhbnN3ZXJcIiB2YWx1ZT1cIk1hbGxpdmFzdGF1c1wiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImdyYWRlXCIgdmFsdWU9XCJBcnZvc3RlbGVcIj48c3BhbiBjbGFzcz1cImFjdGlvbkluZGljYXRvclwiIHN0eWxlPVwidG9wOiAtMS43cHg7IGxlZnQ6IDM5OC43NXB4O1wiPjwvc3Bhbj48L3A+XG4gICAgPHAgY2xhc3M9XCJqc2F2c2NvcmVcIj48L3A+XG4gIDxkaXYgY2xhc3M9XCJqc2F2Y2FudmFzXCIgc3R5bGU9XCJtaW4taGVpZ2h0OiAzMjUuN3B4OyBtaW4td2lkdGg6IDgzOXB4O1wiPjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiLTFcIj4tMTwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCItMVwiPi0xPC9zcGFuPjwvc3Bhbj48L2Rpdj48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPkrkcmplc3RldHTkduQgdGF1bHVra288L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPnRlbXAtbXV1dHR1amE8L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtaW5kZXhlZD1cImZhbHNlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2c2h1dHRlclwiPjwvZGl2PiJ9LCJhbmltYXRpb24iOlt7InR5cGUiOiJhcnJheS1jbGljayIsImluZGV4IjoxLCJhcnJheWlkIjoianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZCIsInRzdGFtcCI6IjIwMjAtMDYtMTBUMDc6NDQ6MDQuMjk1WiIsImN1cnJlbnRTdGVwIjowLCJkYXRhU3RydWN0dXJlc1N0YXRlIjpbeyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ2YWx1ZXMiOls0NCw4MCw0MSwyOCw5OSwzOCwyNCwxNCw4NiwyOV19LHsidHlwZSI6ImFycmF5IiwiaWQiOiIiLCJ2YWx1ZXMiOlsxNV19XSwiYW5pbWF0aW9uSFRNTCI6IlxuICAgIDxoMSBjbGFzcz1cImV4ZXJjaXNlVGl0bGVcIj5MaXPkeXNq5HJqZXN05G1pbmVuPC9oMT5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0TGFiZWxcIj5PaGplZXQ6PC9wPlxuICAgIDxwIGNsYXNzPVwiaW5zdHJ1Y3Rpb25zXCI+U292ZWxsYSBsaXPkeXNq5HJqZXN05G1pc3TkIChpbnNlcnRpb24gc29ydCkgb2hlaXNlZW4gdGF1bHVra29vbi4gQXJ2b2phIHZvaSBrb3Bpb2lkYSBwYWlrYXN0YSB0b2lzZWVuIGtsaWtrYWFtYWxsYS48L3A+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+XG4gICAgPHAgY2xhc3M9XCJqc2F2ZXhlcmNpc2Vjb250cm9sc1wiIGFsaWduPVwiY2VudGVyXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwidW5kb1wiIHZhbHVlPVwiS3Vtb2FcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJyZXNldFwiIHZhbHVlPVwiVXVkZWxsZWVuXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiYW5zd2VyXCIgdmFsdWU9XCJNYWxsaXZhc3RhdXNcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJncmFkZVwiIHZhbHVlPVwiQXJ2b3N0ZWxlXCI+PHNwYW4gY2xhc3M9XCJhY3Rpb25JbmRpY2F0b3JcIiBzdHlsZT1cInRvcDogLTEuN3B4OyBsZWZ0OiAzOTguNzVweDtcIj48L3NwYW4+PC9wPlxuICAgIDxwIGNsYXNzPVwianNhdnNjb3JlXCI+PC9wPlxuICA8ZGl2IGNsYXNzPVwianNhdmNhbnZhc1wiIHN0eWxlPVwibWluLWhlaWdodDogMzI1LjdweDsgbWluLXdpZHRoOiA4MzlweDtcIj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjBcIj4wPC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIjFcIj4xPC9zcGFuPjwvc3Bhbj48L2Rpdj48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPkrkcmplc3RldHTkduQgdGF1bHVra288L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7XCIgaWQ9XCJqc2F2LTIzNzA2NDJhZGY3MDQ2ZmY4OGQwOTQyMWQxNzE3M2VkXCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4IHNlbGVjdGVkXCIgc3R5bGU9XCJ0cmFuc2l0aW9uOiBhbGwgMzAwbXMgbGluZWFyIDBzO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj50ZW1wLW11dXR0dWphPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLWluZGV4ZWQ9XCJmYWxzZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTU8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnNodXR0ZXJcIj48L2Rpdj4ifSx7InR5cGUiOiJhcnJheS1jbGljayIsImluZGV4IjowLCJhcnJheWlkIjoianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MiIsInRzdGFtcCI6IjIwMjAtMDYtMTBUMDc6NDQ6MDUuMTU3WiIsImN1cnJlbnRTdGVwIjoxLCJkYXRhU3RydWN0dXJlc1N0YXRlIjpbeyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ2YWx1ZXMiOls0NCw4MCw0MSwyOCw5OSwzOCwyNCwxNCw4NiwyOV19LHsidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyIiwidmFsdWVzIjpbODBdfV0sImFuaW1hdGlvbkhUTUwiOiJcbiAgICA8aDEgY2xhc3M9XCJleGVyY2lzZVRpdGxlXCI+TGlz5HlzauRyamVzdORtaW5lbjwvaDE+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdExhYmVsXCI+T2hqZWV0OjwvcD5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0aW9uc1wiPlNvdmVsbGEgbGlz5HlzauRyamVzdORtaXN05CAoaW5zZXJ0aW9uIHNvcnQpIG9oZWlzZWVuIHRhdWx1a2tvb24uIEFydm9qYSB2b2kga29waW9pZGEgcGFpa2FzdGEgdG9pc2VlbiBrbGlra2FhbWFsbGEuPC9wPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPlxuICAgIDxwIGNsYXNzPVwianNhdmV4ZXJjaXNlY29udHJvbHNcIiBhbGlnbj1cImNlbnRlclwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInVuZG9cIiB2YWx1ZT1cIkt1bW9hXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwicmVzZXRcIiB2YWx1ZT1cIlV1ZGVsbGVlblwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImFuc3dlclwiIHZhbHVlPVwiTWFsbGl2YXN0YXVzXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiZ3JhZGVcIiB2YWx1ZT1cIkFydm9zdGVsZVwiPjxzcGFuIGNsYXNzPVwiYWN0aW9uSW5kaWNhdG9yXCIgc3R5bGU9XCJ0b3A6IC0xLjdweDsgbGVmdDogMzk4Ljc1cHg7XCI+PC9zcGFuPjwvcD5cbiAgICA8cCBjbGFzcz1cImpzYXZzY29yZVwiPjwvcD5cbiAgPGRpdiBjbGFzcz1cImpzYXZjYW52YXNcIiBzdHlsZT1cIm1pbi1oZWlnaHQ6IDMyNS43cHg7IG1pbi13aWR0aDogODQ5cHg7XCI+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCItMVwiPi0xPC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIi0xXCI+LTE8L3NwYW4+PC9zcGFuPjwvZGl2PjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+SuRyamVzdGV0dOR25CB0YXVsdWtrbzwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIiBpZD1cImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWRcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cInRyYW5zaXRpb246IGFsbCAzMDBtcyBsaW5lYXIgMHM7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPnRlbXAtbXV1dHR1amE8L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtaW5kZXhlZD1cImZhbHNlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDsgdHJhbnNpdGlvbjogd2lkdGggMzAwbXMgZWFzZSAwcztcIiBpZD1cImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTJcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiAwcHg7IGxlZnQ6IDBweDsgdHJhbnNpdGlvbjogbGVmdCAzMDBtcyBsaW5lYXIgMHMsIHRvcCAzMDBtcyBsaW5lYXIgMHM7XCI+ODA8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnNodXR0ZXJcIj48L2Rpdj4ifSx7InR5cGUiOiJncmFkZWFibGUtc3RlcCIsInRzdGFtcCI6IjIwMjAtMDYtMTBUMDc6NDQ6MDUuNDg0WiIsImN1cnJlbnRTdGVwIjoyLCJkYXRhU3RydWN0dXJlc1N0YXRlIjpbeyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ2YWx1ZXMiOls0NCw4MCw0MSwyOCw5OSwzOCwyNCwxNCw4NiwyOV19LHsidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyIiwidmFsdWVzIjpbODBdfV0sImFuaW1hdGlvbkhUTUwiOiJcbiAgICA8aDEgY2xhc3M9XCJleGVyY2lzZVRpdGxlXCI+TGlz5HlzauRyamVzdORtaW5lbjwvaDE+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdExhYmVsXCI+T2hqZWV0OjwvcD5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0aW9uc1wiPlNvdmVsbGEgbGlz5HlzauRyamVzdORtaXN05CAoaW5zZXJ0aW9uIHNvcnQpIG9oZWlzZWVuIHRhdWx1a2tvb24uIEFydm9qYSB2b2kga29waW9pZGEgcGFpa2FzdGEgdG9pc2VlbiBrbGlra2FhbWFsbGEuPC9wPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPlxuICAgIDxwIGNsYXNzPVwianNhdmV4ZXJjaXNlY29udHJvbHNcIiBhbGlnbj1cImNlbnRlclwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInVuZG9cIiB2YWx1ZT1cIkt1bW9hXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwicmVzZXRcIiB2YWx1ZT1cIlV1ZGVsbGVlblwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImFuc3dlclwiIHZhbHVlPVwiTWFsbGl2YXN0YXVzXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiZ3JhZGVcIiB2YWx1ZT1cIkFydm9zdGVsZVwiPjxzcGFuIGNsYXNzPVwiYWN0aW9uSW5kaWNhdG9yXCIgc3R5bGU9XCJ0b3A6IC0xLjdweDsgbGVmdDogMzk4Ljc1cHg7XCI+PC9zcGFuPjwvcD5cbiAgICA8cCBjbGFzcz1cImpzYXZzY29yZVwiPjwvcD5cbiAgPGRpdiBjbGFzcz1cImpzYXZjYW52YXNcIiBzdHlsZT1cIm1pbi1oZWlnaHQ6IDMyNS43cHg7IG1pbi13aWR0aDogODQ5cHg7XCI+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCItMVwiPi0xPC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIi0xXCI+LTE8L3NwYW4+PC9zcGFuPjwvZGl2PjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+SuRyamVzdGV0dOR25CB0YXVsdWtrbzwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIiBpZD1cImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWRcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj50ZW1wLW11dXR0dWphPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLWluZGV4ZWQ9XCJmYWxzZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCIgaWQ9XCJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyXCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogMHB4OyBsZWZ0OiAwcHg7XCI+ODA8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnNodXR0ZXJcIj48L2Rpdj4ifSx7InR5cGUiOiJhcnJheS1jbGljayIsImluZGV4IjowLCJhcnJheWlkIjoianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MiIsInRzdGFtcCI6IjIwMjAtMDYtMTBUMDc6NDQ6MDcuOTczWiIsImN1cnJlbnRTdGVwIjoyLCJkYXRhU3RydWN0dXJlc1N0YXRlIjpbeyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ2YWx1ZXMiOls0NCw4MCw0MSwyOCw5OSwzOCwyNCwxNCw4NiwyOV19LHsidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyIiwidmFsdWVzIjpbODBdfV0sImFuaW1hdGlvbkhUTUwiOiJcbiAgICA8aDEgY2xhc3M9XCJleGVyY2lzZVRpdGxlXCI+TGlz5HlzauRyamVzdORtaW5lbjwvaDE+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdExhYmVsXCI+T2hqZWV0OjwvcD5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0aW9uc1wiPlNvdmVsbGEgbGlz5HlzauRyamVzdORtaXN05CAoaW5zZXJ0aW9uIHNvcnQpIG9oZWlzZWVuIHRhdWx1a2tvb24uIEFydm9qYSB2b2kga29waW9pZGEgcGFpa2FzdGEgdG9pc2VlbiBrbGlra2FhbWFsbGEuPC9wPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPlxuICAgIDxwIGNsYXNzPVwianNhdmV4ZXJjaXNlY29udHJvbHNcIiBhbGlnbj1cImNlbnRlclwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInVuZG9cIiB2YWx1ZT1cIkt1bW9hXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwicmVzZXRcIiB2YWx1ZT1cIlV1ZGVsbGVlblwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImFuc3dlclwiIHZhbHVlPVwiTWFsbGl2YXN0YXVzXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiZ3JhZGVcIiB2YWx1ZT1cIkFydm9zdGVsZVwiPjxzcGFuIGNsYXNzPVwiYWN0aW9uSW5kaWNhdG9yXCIgc3R5bGU9XCJ0b3A6IC0xLjdweDsgbGVmdDogMzk4Ljc1cHg7XCI+PC9zcGFuPjwvcD5cbiAgICA8cCBjbGFzcz1cImpzYXZzY29yZVwiPjwvcD5cbiAgPGRpdiBjbGFzcz1cImpzYXZjYW52YXNcIiBzdHlsZT1cIm1pbi1oZWlnaHQ6IDMyNS43cHg7IG1pbi13aWR0aDogODQ5cHg7XCI+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIxXCI+MTwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIwXCI+MDwvc3Bhbj48L3NwYW4+PC9kaXY+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj5K5HJqZXN0ZXR05HbkIHRhdWx1a2tvPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiIGlkPVwianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZFwiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPnRlbXAtbXV1dHR1amE8L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtaW5kZXhlZD1cImZhbHNlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIiBpZD1cImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTJcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXggc2VsZWN0ZWRcIiBzdHlsZT1cInRyYW5zaXRpb246IGFsbCAzMDBtcyBsaW5lYXIgMHM7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogMHB4OyBsZWZ0OiAwcHg7XCI+ODA8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnNodXR0ZXJcIj48L2Rpdj4ifSx7InR5cGUiOiJhcnJheS1jbGljayIsImluZGV4IjoxLCJhcnJheWlkIjoianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZCIsInRzdGFtcCI6IjIwMjAtMDYtMTBUMDc6NDQ6MDguNzI1WiIsImN1cnJlbnRTdGVwIjoyLCJkYXRhU3RydWN0dXJlc1N0YXRlIjpbeyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ2YWx1ZXMiOls0NCw4MCw0MSwyOCw5OSwzOCwyNCwxNCw4NiwyOV19LHsidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyIiwidmFsdWVzIjpbODBdfV0sImFuaW1hdGlvbkhUTUwiOiJcbiAgICA8aDEgY2xhc3M9XCJleGVyY2lzZVRpdGxlXCI+TGlz5HlzauRyamVzdORtaW5lbjwvaDE+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdExhYmVsXCI+T2hqZWV0OjwvcD5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0aW9uc1wiPlNvdmVsbGEgbGlz5HlzauRyamVzdORtaXN05CAoaW5zZXJ0aW9uIHNvcnQpIG9oZWlzZWVuIHRhdWx1a2tvb24uIEFydm9qYSB2b2kga29waW9pZGEgcGFpa2FzdGEgdG9pc2VlbiBrbGlra2FhbWFsbGEuPC9wPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPlxuICAgIDxwIGNsYXNzPVwianNhdmV4ZXJjaXNlY29udHJvbHNcIiBhbGlnbj1cImNlbnRlclwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInVuZG9cIiB2YWx1ZT1cIkt1bW9hXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwicmVzZXRcIiB2YWx1ZT1cIlV1ZGVsbGVlblwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImFuc3dlclwiIHZhbHVlPVwiTWFsbGl2YXN0YXVzXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiZ3JhZGVcIiB2YWx1ZT1cIkFydm9zdGVsZVwiPjxzcGFuIGNsYXNzPVwiYWN0aW9uSW5kaWNhdG9yXCIgc3R5bGU9XCJ0b3A6IC0xLjdweDsgbGVmdDogMzk4Ljc1cHg7XCI+PC9zcGFuPjwvcD5cbiAgICA8cCBjbGFzcz1cImpzYXZzY29yZVwiPjwvcD5cbiAgPGRpdiBjbGFzcz1cImpzYXZjYW52YXNcIiBzdHlsZT1cIm1pbi1oZWlnaHQ6IDMyNS43cHg7IG1pbi13aWR0aDogODQ5cHg7XCI+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCItMVwiPi0xPC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIi0xXCI+LTE8L3NwYW4+PC9zcGFuPjwvZGl2PjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+SuRyamVzdGV0dOR25CB0YXVsdWtrbzwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDsgdHJhbnNpdGlvbjogd2lkdGggMzAwbXMgZWFzZSAwcztcIiBpZD1cImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWRcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cImxlZnQ6IDBweDsgYm90dG9tOiAwcHg7IHRyYW5zaXRpb246IGxlZnQgMzAwbXMgbGluZWFyIDBzLCBib3R0b20gMzAwbXMgbGluZWFyIDBzO1wiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPnRlbXAtbXV1dHR1amE8L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtaW5kZXhlZD1cImZhbHNlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIiBpZD1cImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTJcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cInRyYW5zaXRpb246IGFsbCAzMDBtcyBsaW5lYXIgMHM7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogMHB4OyBsZWZ0OiAwcHg7XCI+ODA8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnNodXR0ZXJcIj48L2Rpdj4ifSx7InR5cGUiOiJncmFkZWFibGUtc3RlcCIsInRzdGFtcCI6IjIwMjAtMDYtMTBUMDc6NDQ6MDkuMDQ3WiIsImN1cnJlbnRTdGVwIjozLCJkYXRhU3RydWN0dXJlc1N0YXRlIjpbeyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ2YWx1ZXMiOls0NCw4MCw0MSwyOCw5OSwzOCwyNCwxNCw4NiwyOV19LHsidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyIiwidmFsdWVzIjpbODBdfV0sImFuaW1hdGlvbkhUTUwiOiJcbiAgICA8aDEgY2xhc3M9XCJleGVyY2lzZVRpdGxlXCI+TGlz5HlzauRyamVzdORtaW5lbjwvaDE+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdExhYmVsXCI+T2hqZWV0OjwvcD5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0aW9uc1wiPlNvdmVsbGEgbGlz5HlzauRyamVzdORtaXN05CAoaW5zZXJ0aW9uIHNvcnQpIG9oZWlzZWVuIHRhdWx1a2tvb24uIEFydm9qYSB2b2kga29waW9pZGEgcGFpa2FzdGEgdG9pc2VlbiBrbGlra2FhbWFsbGEuPC9wPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPlxuICAgIDxwIGNsYXNzPVwianNhdmV4ZXJjaXNlY29udHJvbHNcIiBhbGlnbj1cImNlbnRlclwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInVuZG9cIiB2YWx1ZT1cIkt1bW9hXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwicmVzZXRcIiB2YWx1ZT1cIlV1ZGVsbGVlblwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImFuc3dlclwiIHZhbHVlPVwiTWFsbGl2YXN0YXVzXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiZ3JhZGVcIiB2YWx1ZT1cIkFydm9zdGVsZVwiPjxzcGFuIGNsYXNzPVwiYWN0aW9uSW5kaWNhdG9yXCIgc3R5bGU9XCJ0b3A6IC0xLjdweDsgbGVmdDogMzk4Ljc1cHg7XCI+PC9zcGFuPjwvcD5cbiAgICA8cCBjbGFzcz1cImpzYXZzY29yZVwiPjwvcD5cbiAgPGRpdiBjbGFzcz1cImpzYXZjYW52YXNcIiBzdHlsZT1cIm1pbi1oZWlnaHQ6IDMyNS43cHg7IG1pbi13aWR0aDogODQ5cHg7XCI+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCItMVwiPi0xPC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIi0xXCI+LTE8L3NwYW4+PC9zcGFuPjwvZGl2PjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+SuRyamVzdGV0dOR25CB0YXVsdWtrbzwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIiBpZD1cImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWRcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cImxlZnQ6IDBweDsgYm90dG9tOiAwcHg7XCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+dGVtcC1tdXV0dHVqYTwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS1pbmRleGVkPVwiZmFsc2VcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiIGlkPVwianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MlwiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogMHB4OyBsZWZ0OiAwcHg7XCI+ODA8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnNodXR0ZXJcIj48L2Rpdj4ifSx7InR5cGUiOiJhcnJheS1jbGljayIsImluZGV4IjoyLCJhcnJheWlkIjoianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZCIsInRzdGFtcCI6IjIwMjAtMDYtMTBUMDc6NDQ6MTEuOTgxWiIsImN1cnJlbnRTdGVwIjozLCJkYXRhU3RydWN0dXJlc1N0YXRlIjpbeyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ2YWx1ZXMiOls0NCw4MCw0MSwyOCw5OSwzOCwyNCwxNCw4NiwyOV19LHsidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyIiwidmFsdWVzIjpbODBdfV0sImFuaW1hdGlvbkhUTUwiOiJcbiAgICA8aDEgY2xhc3M9XCJleGVyY2lzZVRpdGxlXCI+TGlz5HlzauRyamVzdORtaW5lbjwvaDE+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdExhYmVsXCI+T2hqZWV0OjwvcD5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0aW9uc1wiPlNvdmVsbGEgbGlz5HlzauRyamVzdORtaXN05CAoaW5zZXJ0aW9uIHNvcnQpIG9oZWlzZWVuIHRhdWx1a2tvb24uIEFydm9qYSB2b2kga29waW9pZGEgcGFpa2FzdGEgdG9pc2VlbiBrbGlra2FhbWFsbGEuPC9wPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPlxuICAgIDxwIGNsYXNzPVwianNhdmV4ZXJjaXNlY29udHJvbHNcIiBhbGlnbj1cImNlbnRlclwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInVuZG9cIiB2YWx1ZT1cIkt1bW9hXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwicmVzZXRcIiB2YWx1ZT1cIlV1ZGVsbGVlblwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImFuc3dlclwiIHZhbHVlPVwiTWFsbGl2YXN0YXVzXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiZ3JhZGVcIiB2YWx1ZT1cIkFydm9zdGVsZVwiPjxzcGFuIGNsYXNzPVwiYWN0aW9uSW5kaWNhdG9yXCIgc3R5bGU9XCJ0b3A6IC0xLjdweDsgbGVmdDogMzk4Ljc1cHg7XCI+PC9zcGFuPjwvcD5cbiAgICA8cCBjbGFzcz1cImpzYXZzY29yZVwiPjwvcD5cbiAgPGRpdiBjbGFzcz1cImpzYXZjYW52YXNcIiBzdHlsZT1cIm1pbi1oZWlnaHQ6IDMyNS43cHg7IG1pbi13aWR0aDogODQ5cHg7XCI+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIwXCI+MDwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCIyXCI+Mjwvc3Bhbj48L3NwYW4+PC9kaXY+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj5K5HJqZXN0ZXR05HbkIHRhdWx1a2tvPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiIGlkPVwianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZFwiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwibGVmdDogMHB4OyBib3R0b206IDBweDtcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXggc2VsZWN0ZWRcIiBzdHlsZT1cInRyYW5zaXRpb246IGFsbCAzMDBtcyBsaW5lYXIgMHM7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDE8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+dGVtcC1tdXV0dHVqYTwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS1pbmRleGVkPVwiZmFsc2VcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiIGlkPVwianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MlwiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogMHB4OyBsZWZ0OiAwcHg7XCI+ODA8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnNodXR0ZXJcIj48L2Rpdj4ifSx7InR5cGUiOiJhcnJheS1jbGljayIsImluZGV4IjowLCJhcnJheWlkIjoianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MiIsInRzdGFtcCI6IjIwMjAtMDYtMTBUMDc6NDQ6MTMuMzE3WiIsImN1cnJlbnRTdGVwIjozLCJkYXRhU3RydWN0dXJlc1N0YXRlIjpbeyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ2YWx1ZXMiOls0NCw4MCw0MSwyOCw5OSwzOCwyNCwxNCw4NiwyOV19LHsidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyIiwidmFsdWVzIjpbNDFdfV0sImFuaW1hdGlvbkhUTUwiOiJcbiAgICA8aDEgY2xhc3M9XCJleGVyY2lzZVRpdGxlXCI+TGlz5HlzauRyamVzdORtaW5lbjwvaDE+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdExhYmVsXCI+T2hqZWV0OjwvcD5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0aW9uc1wiPlNvdmVsbGEgbGlz5HlzauRyamVzdORtaXN05CAoaW5zZXJ0aW9uIHNvcnQpIG9oZWlzZWVuIHRhdWx1a2tvb24uIEFydm9qYSB2b2kga29waW9pZGEgcGFpa2FzdGEgdG9pc2VlbiBrbGlra2FhbWFsbGEuPC9wPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPlxuICAgIDxwIGNsYXNzPVwianNhdmV4ZXJjaXNlY29udHJvbHNcIiBhbGlnbj1cImNlbnRlclwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInVuZG9cIiB2YWx1ZT1cIkt1bW9hXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwicmVzZXRcIiB2YWx1ZT1cIlV1ZGVsbGVlblwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImFuc3dlclwiIHZhbHVlPVwiTWFsbGl2YXN0YXVzXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiZ3JhZGVcIiB2YWx1ZT1cIkFydm9zdGVsZVwiPjxzcGFuIGNsYXNzPVwiYWN0aW9uSW5kaWNhdG9yXCIgc3R5bGU9XCJ0b3A6IC0xLjdweDsgbGVmdDogMzk4Ljc1cHg7XCI+PC9zcGFuPjwvcD5cbiAgICA8cCBjbGFzcz1cImpzYXZzY29yZVwiPjwvcD5cbiAgPGRpdiBjbGFzcz1cImpzYXZjYW52YXNcIiBzdHlsZT1cIm1pbi1oZWlnaHQ6IDMyNS43cHg7IG1pbi13aWR0aDogODQ5cHg7XCI+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCItMVwiPi0xPC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIi0xXCI+LTE8L3NwYW4+PC9zcGFuPjwvZGl2PjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+SuRyamVzdGV0dOR25CB0YXVsdWtrbzwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIiBpZD1cImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWRcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cImxlZnQ6IDBweDsgYm90dG9tOiAwcHg7XCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCIgc3R5bGU9XCJ0cmFuc2l0aW9uOiBhbGwgMzAwbXMgbGluZWFyIDBzO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPnRlbXAtbXV1dHR1amE8L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtaW5kZXhlZD1cImZhbHNlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDsgdHJhbnNpdGlvbjogd2lkdGggMzAwbXMgZWFzZSAwcztcIiBpZD1cImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTJcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IDBweDsgbGVmdDogMHB4OyB0cmFuc2l0aW9uOiBsZWZ0IDMwMG1zIGxpbmVhciAwcywgdG9wIDMwMG1zIGxpbmVhciAwcztcIj40MTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2c2h1dHRlclwiPjwvZGl2PiJ9LHsidHlwZSI6ImdyYWRlYWJsZS1zdGVwIiwidHN0YW1wIjoiMjAyMC0wNi0xMFQwNzo0NDoxMy42MzJaIiwiY3VycmVudFN0ZXAiOjQsImRhdGFTdHJ1Y3R1cmVzU3RhdGUiOlt7InR5cGUiOiJhcnJheSIsImlkIjoianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZCIsInZhbHVlcyI6WzQ0LDgwLDQxLDI4LDk5LDM4LDI0LDE0LDg2LDI5XX0seyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTIiLCJ2YWx1ZXMiOls0MV19XSwiYW5pbWF0aW9uSFRNTCI6IlxuICAgIDxoMSBjbGFzcz1cImV4ZXJjaXNlVGl0bGVcIj5MaXPkeXNq5HJqZXN05G1pbmVuPC9oMT5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0TGFiZWxcIj5PaGplZXQ6PC9wPlxuICAgIDxwIGNsYXNzPVwiaW5zdHJ1Y3Rpb25zXCI+U292ZWxsYSBsaXPkeXNq5HJqZXN05G1pc3TkIChpbnNlcnRpb24gc29ydCkgb2hlaXNlZW4gdGF1bHVra29vbi4gQXJ2b2phIHZvaSBrb3Bpb2lkYSBwYWlrYXN0YSB0b2lzZWVuIGtsaWtrYWFtYWxsYS48L3A+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+XG4gICAgPHAgY2xhc3M9XCJqc2F2ZXhlcmNpc2Vjb250cm9sc1wiIGFsaWduPVwiY2VudGVyXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwidW5kb1wiIHZhbHVlPVwiS3Vtb2FcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJyZXNldFwiIHZhbHVlPVwiVXVkZWxsZWVuXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiYW5zd2VyXCIgdmFsdWU9XCJNYWxsaXZhc3RhdXNcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJncmFkZVwiIHZhbHVlPVwiQXJ2b3N0ZWxlXCI+PHNwYW4gY2xhc3M9XCJhY3Rpb25JbmRpY2F0b3JcIiBzdHlsZT1cInRvcDogLTEuN3B4OyBsZWZ0OiAzOTguNzVweDtcIj48L3NwYW4+PC9wPlxuICAgIDxwIGNsYXNzPVwianNhdnNjb3JlXCI+PC9wPlxuICA8ZGl2IGNsYXNzPVwianNhdmNhbnZhc1wiIHN0eWxlPVwibWluLWhlaWdodDogMzI1LjdweDsgbWluLXdpZHRoOiA4NDlweDtcIj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIi0xXCI+LTE8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiLTFcIj4tMTwvc3Bhbj48L3NwYW4+PC9kaXY+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj5K5HJqZXN0ZXR05HbkIHRhdWx1a2tvPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiIGlkPVwianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZFwiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwibGVmdDogMHB4OyBib3R0b206IDBweDtcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPnRlbXAtbXV1dHR1amE8L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtaW5kZXhlZD1cImZhbHNlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIiBpZD1cImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTJcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IDBweDsgbGVmdDogMHB4O1wiPjQxPC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZzaHV0dGVyXCI+PC9kaXY+In0seyJ0eXBlIjoiYXJyYXktY2xpY2siLCJpbmRleCI6MSwiYXJyYXlpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ0c3RhbXAiOiIyMDIwLTA2LTEwVDA3OjQ0OjE0LjM5NloiLCJjdXJyZW50U3RlcCI6NCwiZGF0YVN0cnVjdHVyZXNTdGF0ZSI6W3sidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTIzNzA2NDJhZGY3MDQ2ZmY4OGQwOTQyMWQxNzE3M2VkIiwidmFsdWVzIjpbNDQsODAsNDEsMjgsOTksMzgsMjQsMTQsODYsMjldfSx7InR5cGUiOiJhcnJheSIsImlkIjoianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MiIsInZhbHVlcyI6WzQxXX1dLCJhbmltYXRpb25IVE1MIjoiXG4gICAgPGgxIGNsYXNzPVwiZXhlcmNpc2VUaXRsZVwiPkxpc+R5c2rkcmplc3TkbWluZW48L2gxPlxuICAgIDxwIGNsYXNzPVwiaW5zdHJ1Y3RMYWJlbFwiPk9oamVldDo8L3A+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdGlvbnNcIj5Tb3ZlbGxhIGxpc+R5c2rkcmplc3TkbWlzdOQgKGluc2VydGlvbiBzb3J0KSBvaGVpc2VlbiB0YXVsdWtrb29uLiBBcnZvamEgdm9pIGtvcGlvaWRhIHBhaWthc3RhIHRvaXNlZW4ga2xpa2thYW1hbGxhLjwvcD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD5cbiAgICA8cCBjbGFzcz1cImpzYXZleGVyY2lzZWNvbnRyb2xzXCIgYWxpZ249XCJjZW50ZXJcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJ1bmRvXCIgdmFsdWU9XCJLdW1vYVwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInJlc2V0XCIgdmFsdWU9XCJVdWRlbGxlZW5cIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJhbnN3ZXJcIiB2YWx1ZT1cIk1hbGxpdmFzdGF1c1wiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImdyYWRlXCIgdmFsdWU9XCJBcnZvc3RlbGVcIj48c3BhbiBjbGFzcz1cImFjdGlvbkluZGljYXRvclwiIHN0eWxlPVwidG9wOiAtMS43cHg7IGxlZnQ6IDM5OC43NXB4O1wiPjwvc3Bhbj48L3A+XG4gICAgPHAgY2xhc3M9XCJqc2F2c2NvcmVcIj48L3A+XG4gIDxkaXYgY2xhc3M9XCJqc2F2Y2FudmFzXCIgc3R5bGU9XCJtaW4taGVpZ2h0OiAzMjUuN3B4OyBtaW4td2lkdGg6IDg0OXB4O1wiPjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMFwiPjA8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMVwiPjE8L3NwYW4+PC9zcGFuPjwvZGl2PjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+SuRyamVzdGV0dOR25CB0YXVsdWtrbzwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIiBpZD1cImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWRcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXggc2VsZWN0ZWRcIiBzdHlsZT1cInRyYW5zaXRpb246IGFsbCAzMDBtcyBsaW5lYXIgMHM7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwibGVmdDogMHB4OyBib3R0b206IDBweDtcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU0cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPnRlbXAtbXV1dHR1amE8L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtaW5kZXhlZD1cImZhbHNlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIiBpZD1cImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTJcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IDBweDsgbGVmdDogMHB4O1wiPjQxPC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZzaHV0dGVyXCI+PC9kaXY+In0seyJ0eXBlIjoiYXJyYXktY2xpY2siLCJpbmRleCI6MiwiYXJyYXlpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ0c3RhbXAiOiIyMDIwLTA2LTEwVDA3OjQ0OjE1LjAyOVoiLCJjdXJyZW50U3RlcCI6NCwiZGF0YVN0cnVjdHVyZXNTdGF0ZSI6W3sidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTIzNzA2NDJhZGY3MDQ2ZmY4OGQwOTQyMWQxNzE3M2VkIiwidmFsdWVzIjpbNDQsODAsODAsMjgsOTksMzgsMjQsMTQsODYsMjldfSx7InR5cGUiOiJhcnJheSIsImlkIjoianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MiIsInZhbHVlcyI6WzQxXX1dLCJhbmltYXRpb25IVE1MIjoiXG4gICAgPGgxIGNsYXNzPVwiZXhlcmNpc2VUaXRsZVwiPkxpc+R5c2rkcmplc3TkbWluZW48L2gxPlxuICAgIDxwIGNsYXNzPVwiaW5zdHJ1Y3RMYWJlbFwiPk9oamVldDo8L3A+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdGlvbnNcIj5Tb3ZlbGxhIGxpc+R5c2rkcmplc3TkbWlzdOQgKGluc2VydGlvbiBzb3J0KSBvaGVpc2VlbiB0YXVsdWtrb29uLiBBcnZvamEgdm9pIGtvcGlvaWRhIHBhaWthc3RhIHRvaXNlZW4ga2xpa2thYW1hbGxhLjwvcD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD5cbiAgICA8cCBjbGFzcz1cImpzYXZleGVyY2lzZWNvbnRyb2xzXCIgYWxpZ249XCJjZW50ZXJcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJ1bmRvXCIgdmFsdWU9XCJLdW1vYVwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInJlc2V0XCIgdmFsdWU9XCJVdWRlbGxlZW5cIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJhbnN3ZXJcIiB2YWx1ZT1cIk1hbGxpdmFzdGF1c1wiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImdyYWRlXCIgdmFsdWU9XCJBcnZvc3RlbGVcIj48c3BhbiBjbGFzcz1cImFjdGlvbkluZGljYXRvclwiIHN0eWxlPVwidG9wOiAtMS43cHg7IGxlZnQ6IDM5OC43NXB4O1wiPjwvc3Bhbj48L3A+XG4gICAgPHAgY2xhc3M9XCJqc2F2c2NvcmVcIj48L3A+XG4gIDxkaXYgY2xhc3M9XCJqc2F2Y2FudmFzXCIgc3R5bGU9XCJtaW4taGVpZ2h0OiAzMjUuN3B4OyBtaW4td2lkdGg6IDg0OXB4O1wiPjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiLTFcIj4tMTwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCItMVwiPi0xPC9zcGFuPjwvc3Bhbj48L2Rpdj48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPkrkcmplc3RldHTkduQgdGF1bHVra288L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7IHRyYW5zaXRpb246IHdpZHRoIDMwMG1zIGVhc2UgMHM7XCIgaWQ9XCJqc2F2LTIzNzA2NDJhZGY3MDQ2ZmY4OGQwOTQyMWQxNzE3M2VkXCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCIgc3R5bGU9XCJ0cmFuc2l0aW9uOiBhbGwgMzAwbXMgbGluZWFyIDBzO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cImxlZnQ6IDBweDsgYm90dG9tOiAwcHg7XCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCIgc3R5bGU9XCJcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDsgdHJhbnNpdGlvbjogaGVpZ2h0IDMwMG1zIGVhc2UgMHM7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwibGVmdDogMHB4OyBib3R0b206IDBweDsgdHJhbnNpdGlvbjogbGVmdCAzMDBtcyBsaW5lYXIgMHMsIGJvdHRvbSAzMDBtcyBsaW5lYXIgMHM7XCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+dGVtcC1tdXV0dHVqYTwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS1pbmRleGVkPVwiZmFsc2VcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiIGlkPVwianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MlwiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogMHB4OyBsZWZ0OiAwcHg7XCI+NDE8L3NwYW4+PC9zcGFuPjwvbGk+PC9vbD48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnNodXR0ZXJcIj48L2Rpdj4ifSx7InR5cGUiOiJncmFkZWFibGUtc3RlcCIsInRzdGFtcCI6IjIwMjAtMDYtMTBUMDc6NDQ6MTUuMzQ4WiIsImN1cnJlbnRTdGVwIjo1LCJkYXRhU3RydWN0dXJlc1N0YXRlIjpbeyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ2YWx1ZXMiOls0NCw4MCw4MCwyOCw5OSwzOCwyNCwxNCw4NiwyOV19LHsidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyIiwidmFsdWVzIjpbNDFdfV0sImFuaW1hdGlvbkhUTUwiOiJcbiAgICA8aDEgY2xhc3M9XCJleGVyY2lzZVRpdGxlXCI+TGlz5HlzauRyamVzdORtaW5lbjwvaDE+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdExhYmVsXCI+T2hqZWV0OjwvcD5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0aW9uc1wiPlNvdmVsbGEgbGlz5HlzauRyamVzdORtaXN05CAoaW5zZXJ0aW9uIHNvcnQpIG9oZWlzZWVuIHRhdWx1a2tvb24uIEFydm9qYSB2b2kga29waW9pZGEgcGFpa2FzdGEgdG9pc2VlbiBrbGlra2FhbWFsbGEuPC9wPjxvbCBjbGFzcz1cImpzYXZjb2RlIGpzYXZjZW50ZXJcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB3aWR0aDogNTMycHg7XCI+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ZGVmIGluc3NvcnRzaGlmdChBKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKEEpKTogIyBJbnNlcnQgaSd0aCByZWNvcmQ8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIHRlbXAgPSBBW2ldPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgaj1pPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgd2hpbGUgKGogJmd0OyAwKSBhbmQgKHRlbXAgJmx0OyBBW2otMV0pOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgICBBW2pdID0gQVtqLTFdPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gICAgICBqIC09IDE8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgIEFbal0gPSB0ZW1wPC9saT48L29sPlxuICAgIDxwIGNsYXNzPVwianNhdmV4ZXJjaXNlY29udHJvbHNcIiBhbGlnbj1cImNlbnRlclwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInVuZG9cIiB2YWx1ZT1cIkt1bW9hXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwicmVzZXRcIiB2YWx1ZT1cIlV1ZGVsbGVlblwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImFuc3dlclwiIHZhbHVlPVwiTWFsbGl2YXN0YXVzXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiZ3JhZGVcIiB2YWx1ZT1cIkFydm9zdGVsZVwiPjxzcGFuIGNsYXNzPVwiYWN0aW9uSW5kaWNhdG9yXCIgc3R5bGU9XCJ0b3A6IC0xLjdweDsgbGVmdDogMzk4Ljc1cHg7XCI+PC9zcGFuPjwvcD5cbiAgICA8cCBjbGFzcz1cImpzYXZzY29yZVwiPjwvcD5cbiAgPGRpdiBjbGFzcz1cImpzYXZjYW52YXNcIiBzdHlsZT1cIm1pbi1oZWlnaHQ6IDMyNS43cHg7IG1pbi13aWR0aDogODQ5cHg7XCI+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCItMVwiPi0xPC9zcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIi0xXCI+LTE8L3NwYW4+PC9zcGFuPjwvZGl2PjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+SuRyamVzdGV0dOR25CB0YXVsdWtrbzwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIiBpZD1cImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWRcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cImxlZnQ6IDBweDsgYm90dG9tOiAwcHg7XCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCIgc3R5bGU9XCJcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJsZWZ0OiAwcHg7IGJvdHRvbTogMHB4O1wiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPnRlbXAtbXV1dHR1amE8L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtaW5kZXhlZD1cImZhbHNlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIiBpZD1cImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTJcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IDBweDsgbGVmdDogMHB4O1wiPjQxPC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZzaHV0dGVyXCI+PC9kaXY+In0seyJ0eXBlIjoiYXJyYXktY2xpY2siLCJpbmRleCI6MCwiYXJyYXlpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ0c3RhbXAiOiIyMDIwLTA2LTEwVDA3OjQ0OjE4LjE0OFoiLCJjdXJyZW50U3RlcCI6NSwiZGF0YVN0cnVjdHVyZXNTdGF0ZSI6W3sidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTIzNzA2NDJhZGY3MDQ2ZmY4OGQwOTQyMWQxNzE3M2VkIiwidmFsdWVzIjpbNDQsODAsODAsMjgsOTksMzgsMjQsMTQsODYsMjldfSx7InR5cGUiOiJhcnJheSIsImlkIjoianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MiIsInZhbHVlcyI6WzQxXX1dLCJhbmltYXRpb25IVE1MIjoiXG4gICAgPGgxIGNsYXNzPVwiZXhlcmNpc2VUaXRsZVwiPkxpc+R5c2rkcmplc3TkbWluZW48L2gxPlxuICAgIDxwIGNsYXNzPVwiaW5zdHJ1Y3RMYWJlbFwiPk9oamVldDo8L3A+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdGlvbnNcIj5Tb3ZlbGxhIGxpc+R5c2rkcmplc3TkbWlzdOQgKGluc2VydGlvbiBzb3J0KSBvaGVpc2VlbiB0YXVsdWtrb29uLiBBcnZvamEgdm9pIGtvcGlvaWRhIHBhaWthc3RhIHRvaXNlZW4ga2xpa2thYW1hbGxhLjwvcD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD5cbiAgICA8cCBjbGFzcz1cImpzYXZleGVyY2lzZWNvbnRyb2xzXCIgYWxpZ249XCJjZW50ZXJcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJ1bmRvXCIgdmFsdWU9XCJLdW1vYVwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInJlc2V0XCIgdmFsdWU9XCJVdWRlbGxlZW5cIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJhbnN3ZXJcIiB2YWx1ZT1cIk1hbGxpdmFzdGF1c1wiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImdyYWRlXCIgdmFsdWU9XCJBcnZvc3RlbGVcIj48c3BhbiBjbGFzcz1cImFjdGlvbkluZGljYXRvclwiIHN0eWxlPVwidG9wOiAtMS43cHg7IGxlZnQ6IDM5OC43NXB4O1wiPjwvc3Bhbj48L3A+XG4gICAgPHAgY2xhc3M9XCJqc2F2c2NvcmVcIj48L3A+XG4gIDxkaXYgY2xhc3M9XCJqc2F2Y2FudmFzXCIgc3R5bGU9XCJtaW4taGVpZ2h0OiAzMjUuN3B4OyBtaW4td2lkdGg6IDg0OXB4O1wiPjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMFwiPjA8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMFwiPjA8L3NwYW4+PC9zcGFuPjwvZGl2PjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+SuRyamVzdGV0dOR25CB0YXVsdWtrbzwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIiBpZD1cImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWRcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXggc2VsZWN0ZWRcIiBzdHlsZT1cInRyYW5zaXRpb246IGFsbCAzMDBtcyBsaW5lYXIgMHM7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCIgc3R5bGU9XCJcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJsZWZ0OiAwcHg7IGJvdHRvbTogMHB4O1wiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwibGVmdDogMHB4OyBib3R0b206IDBweDtcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj50ZW1wLW11dXR0dWphPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLWluZGV4ZWQ9XCJmYWxzZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCIgaWQ9XCJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyXCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCIgc3R5bGU9XCJcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiAwcHg7IGxlZnQ6IDBweDtcIj40MTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2c2h1dHRlclwiPjwvZGl2PiJ9LHsidHlwZSI6ImFycmF5LWNsaWNrIiwiaW5kZXgiOjEsImFycmF5aWQiOiJqc2F2LTIzNzA2NDJhZGY3MDQ2ZmY4OGQwOTQyMWQxNzE3M2VkIiwidHN0YW1wIjoiMjAyMC0wNi0xMFQwNzo0NDoxOC43NjVaIiwiY3VycmVudFN0ZXAiOjUsImRhdGFTdHJ1Y3R1cmVzU3RhdGUiOlt7InR5cGUiOiJhcnJheSIsImlkIjoianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZCIsInZhbHVlcyI6WzQ0LDQ0LDgwLDI4LDk5LDM4LDI0LDE0LDg2LDI5XX0seyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTIiLCJ2YWx1ZXMiOls0MV19XSwiYW5pbWF0aW9uSFRNTCI6IlxuICAgIDxoMSBjbGFzcz1cImV4ZXJjaXNlVGl0bGVcIj5MaXPkeXNq5HJqZXN05G1pbmVuPC9oMT5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0TGFiZWxcIj5PaGplZXQ6PC9wPlxuICAgIDxwIGNsYXNzPVwiaW5zdHJ1Y3Rpb25zXCI+U292ZWxsYSBsaXPkeXNq5HJqZXN05G1pc3TkIChpbnNlcnRpb24gc29ydCkgb2hlaXNlZW4gdGF1bHVra29vbi4gQXJ2b2phIHZvaSBrb3Bpb2lkYSBwYWlrYXN0YSB0b2lzZWVuIGtsaWtrYWFtYWxsYS48L3A+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+XG4gICAgPHAgY2xhc3M9XCJqc2F2ZXhlcmNpc2Vjb250cm9sc1wiIGFsaWduPVwiY2VudGVyXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwidW5kb1wiIHZhbHVlPVwiS3Vtb2FcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJyZXNldFwiIHZhbHVlPVwiVXVkZWxsZWVuXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiYW5zd2VyXCIgdmFsdWU9XCJNYWxsaXZhc3RhdXNcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJncmFkZVwiIHZhbHVlPVwiQXJ2b3N0ZWxlXCI+PHNwYW4gY2xhc3M9XCJhY3Rpb25JbmRpY2F0b3JcIiBzdHlsZT1cInRvcDogLTEuN3B4OyBsZWZ0OiAzOTguNzVweDtcIj48L3NwYW4+PC9wPlxuICAgIDxwIGNsYXNzPVwianNhdnNjb3JlXCI+PC9wPlxuICA8ZGl2IGNsYXNzPVwianNhdmNhbnZhc1wiIHN0eWxlPVwibWluLWhlaWdodDogMzI1LjdweDsgbWluLXdpZHRoOiA4NDlweDtcIj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIi0xXCI+LTE8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiLTFcIj4tMTwvc3Bhbj48L3NwYW4+PC9kaXY+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj5K5HJqZXN0ZXR05HbkIHRhdWx1a2tvPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4OyB0cmFuc2l0aW9uOiB3aWR0aCAzMDBtcyBlYXNlIDBzO1wiIGlkPVwianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZFwiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwidHJhbnNpdGlvbjogYWxsIDMwMG1zIGxpbmVhciAwcztcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7IHRyYW5zaXRpb246IGhlaWdodCAzMDBtcyBlYXNlIDBzO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cImxlZnQ6IDBweDsgYm90dG9tOiAwcHg7IHRyYW5zaXRpb246IGxlZnQgMzAwbXMgbGluZWFyIDBzLCBib3R0b20gMzAwbXMgbGluZWFyIDBzO1wiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwibGVmdDogMHB4OyBib3R0b206IDBweDtcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj50ZW1wLW11dXR0dWphPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLWluZGV4ZWQ9XCJmYWxzZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCIgaWQ9XCJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyXCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCIgc3R5bGU9XCJcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiAwcHg7IGxlZnQ6IDBweDtcIj40MTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2c2h1dHRlclwiPjwvZGl2PiJ9LHsidHlwZSI6ImdyYWRlYWJsZS1zdGVwIiwidHN0YW1wIjoiMjAyMC0wNi0xMFQwNzo0NDoxOS4wODJaIiwiY3VycmVudFN0ZXAiOjYsImRhdGFTdHJ1Y3R1cmVzU3RhdGUiOlt7InR5cGUiOiJhcnJheSIsImlkIjoianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZCIsInZhbHVlcyI6WzQ0LDQ0LDgwLDI4LDk5LDM4LDI0LDE0LDg2LDI5XX0seyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTIiLCJ2YWx1ZXMiOls0MV19XSwiYW5pbWF0aW9uSFRNTCI6IlxuICAgIDxoMSBjbGFzcz1cImV4ZXJjaXNlVGl0bGVcIj5MaXPkeXNq5HJqZXN05G1pbmVuPC9oMT5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0TGFiZWxcIj5PaGplZXQ6PC9wPlxuICAgIDxwIGNsYXNzPVwiaW5zdHJ1Y3Rpb25zXCI+U292ZWxsYSBsaXPkeXNq5HJqZXN05G1pc3TkIChpbnNlcnRpb24gc29ydCkgb2hlaXNlZW4gdGF1bHVra29vbi4gQXJ2b2phIHZvaSBrb3Bpb2lkYSBwYWlrYXN0YSB0b2lzZWVuIGtsaWtrYWFtYWxsYS48L3A+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+XG4gICAgPHAgY2xhc3M9XCJqc2F2ZXhlcmNpc2Vjb250cm9sc1wiIGFsaWduPVwiY2VudGVyXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwidW5kb1wiIHZhbHVlPVwiS3Vtb2FcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJyZXNldFwiIHZhbHVlPVwiVXVkZWxsZWVuXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiYW5zd2VyXCIgdmFsdWU9XCJNYWxsaXZhc3RhdXNcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJncmFkZVwiIHZhbHVlPVwiQXJ2b3N0ZWxlXCI+PHNwYW4gY2xhc3M9XCJhY3Rpb25JbmRpY2F0b3JcIiBzdHlsZT1cInRvcDogLTEuN3B4OyBsZWZ0OiAzOTguNzVweDtcIj48L3NwYW4+PC9wPlxuICAgIDxwIGNsYXNzPVwianNhdnNjb3JlXCI+PC9wPlxuICA8ZGl2IGNsYXNzPVwianNhdmNhbnZhc1wiIHN0eWxlPVwibWluLWhlaWdodDogMzI1LjdweDsgbWluLXdpZHRoOiA4NDlweDtcIj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIi0xXCI+LTE8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiLTFcIj4tMTwvc3Bhbj48L3NwYW4+PC9kaXY+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj5K5HJqZXN0ZXR05HbkIHRhdWx1a2tvPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiIGlkPVwianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZFwiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4wPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCIgc3R5bGU9XCJcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1OHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cImxlZnQ6IDBweDsgYm90dG9tOiAwcHg7XCI+NDQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4xPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCIgc3R5bGU9XCJcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJsZWZ0OiAwcHg7IGJvdHRvbTogMHB4O1wiPjgwPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mjwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM3cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Mzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEzMHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj45OTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjQ8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4zODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjU8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzMnB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjY8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4xNDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjc8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMTNweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+ODY8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj44PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzhweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj45PC9zcGFuPjwvbGk+PC9vbD48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPnRlbXAtbXV1dHR1amE8L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2YXJyYXkganNhdmhvcml6b250YWxhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJhcnJheVwiIGRhdGEtaW5kZXhlZD1cImZhbHNlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPlwiIHN0eWxlPVwiaGVpZ2h0OiA0N3B4OyB3aWR0aDogNDhweDtcIiBpZD1cImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTJcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IDBweDsgbGVmdDogMHB4O1wiPjQxPC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZzaHV0dGVyXCI+PC9kaXY+In0seyJ0eXBlIjoiYXJyYXktY2xpY2siLCJpbmRleCI6MCwiYXJyYXlpZCI6ImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTIiLCJ0c3RhbXAiOiIyMDIwLTA2LTEwVDA3OjQ0OjE5LjY3NloiLCJjdXJyZW50U3RlcCI6NiwiZGF0YVN0cnVjdHVyZXNTdGF0ZSI6W3sidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTIzNzA2NDJhZGY3MDQ2ZmY4OGQwOTQyMWQxNzE3M2VkIiwidmFsdWVzIjpbNDQsNDQsODAsMjgsOTksMzgsMjQsMTQsODYsMjldfSx7InR5cGUiOiJhcnJheSIsImlkIjoianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MiIsInZhbHVlcyI6WzQxXX1dLCJhbmltYXRpb25IVE1MIjoiXG4gICAgPGgxIGNsYXNzPVwiZXhlcmNpc2VUaXRsZVwiPkxpc+R5c2rkcmplc3TkbWluZW48L2gxPlxuICAgIDxwIGNsYXNzPVwiaW5zdHJ1Y3RMYWJlbFwiPk9oamVldDo8L3A+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdGlvbnNcIj5Tb3ZlbGxhIGxpc+R5c2rkcmplc3TkbWlzdOQgKGluc2VydGlvbiBzb3J0KSBvaGVpc2VlbiB0YXVsdWtrb29uLiBBcnZvamEgdm9pIGtvcGlvaWRhIHBhaWthc3RhIHRvaXNlZW4ga2xpa2thYW1hbGxhLjwvcD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD5cbiAgICA8cCBjbGFzcz1cImpzYXZleGVyY2lzZWNvbnRyb2xzXCIgYWxpZ249XCJjZW50ZXJcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJ1bmRvXCIgdmFsdWU9XCJLdW1vYVwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInJlc2V0XCIgdmFsdWU9XCJVdWRlbGxlZW5cIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJhbnN3ZXJcIiB2YWx1ZT1cIk1hbGxpdmFzdGF1c1wiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImdyYWRlXCIgdmFsdWU9XCJBcnZvc3RlbGVcIj48c3BhbiBjbGFzcz1cImFjdGlvbkluZGljYXRvclwiIHN0eWxlPVwidG9wOiAtMS43cHg7IGxlZnQ6IDM5OC43NXB4O1wiPjwvc3Bhbj48L3A+XG4gICAgPHAgY2xhc3M9XCJqc2F2c2NvcmVcIj48L3A+XG4gIDxkaXYgY2xhc3M9XCJqc2F2Y2FudmFzXCIgc3R5bGU9XCJtaW4taGVpZ2h0OiAzMjUuN3B4OyBtaW4td2lkdGg6IDg0OXB4O1wiPjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMVwiPjE8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiMFwiPjA8L3NwYW4+PC9zcGFuPjwvZGl2PjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+SuRyamVzdGV0dOR25CB0YXVsdWtrbzwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZpbmRleGVkIGpzYXZhcnJheSBqc2F2YmFyYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYmFyXCIgZGF0YS1pbmRleGVkPVwidHJ1ZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWViYXImcXVvdDs+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZSZxdW90Oz48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWVsYWJlbCZxdW90Oz57e3ZhbHVlfX08L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPSZxdW90O2pzYXZpbmRleGxhYmVsJnF1b3Q7Pnt7aW5kZXh9fTwvc3Bhbj5cIiBzdHlsZT1cIndpZHRoOiA0NzFweDtcIiBpZD1cImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWRcIj48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJsZWZ0OiAwcHg7IGJvdHRvbTogMHB4O1wiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwibGVmdDogMHB4OyBib3R0b206IDBweDtcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj50ZW1wLW11dXR0dWphPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLWluZGV4ZWQ9XCJmYWxzZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCIgaWQ9XCJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyXCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4IHNlbGVjdGVkXCIgc3R5bGU9XCJ0cmFuc2l0aW9uOiBhbGwgMzAwbXMgbGluZWFyIDBzO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IDBweDsgbGVmdDogMHB4O1wiPjQxPC9zcGFuPjwvc3Bhbj48L2xpPjwvb2w+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZzaHV0dGVyXCI+PC9kaXY+In0seyJ0eXBlIjoiYXJyYXktY2xpY2siLCJpbmRleCI6MCwiYXJyYXlpZCI6ImpzYXYtMjM3MDY0MmFkZjcwNDZmZjg4ZDA5NDIxZDE3MTczZWQiLCJ0c3RhbXAiOiIyMDIwLTA2LTEwVDA3OjQ0OjIwLjcwMFoiLCJjdXJyZW50U3RlcCI6NiwiZGF0YVN0cnVjdHVyZXNTdGF0ZSI6W3sidHlwZSI6ImFycmF5IiwiaWQiOiJqc2F2LTIzNzA2NDJhZGY3MDQ2ZmY4OGQwOTQyMWQxNzE3M2VkIiwidmFsdWVzIjpbNDEsNDQsODAsMjgsOTksMzgsMjQsMTQsODYsMjldfSx7InR5cGUiOiJhcnJheSIsImlkIjoianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MiIsInZhbHVlcyI6WzQxXX1dLCJhbmltYXRpb25IVE1MIjoiXG4gICAgPGgxIGNsYXNzPVwiZXhlcmNpc2VUaXRsZVwiPkxpc+R5c2rkcmplc3TkbWluZW48L2gxPlxuICAgIDxwIGNsYXNzPVwiaW5zdHJ1Y3RMYWJlbFwiPk9oamVldDo8L3A+XG4gICAgPHAgY2xhc3M9XCJpbnN0cnVjdGlvbnNcIj5Tb3ZlbGxhIGxpc+R5c2rkcmplc3TkbWlzdOQgKGluc2VydGlvbiBzb3J0KSBvaGVpc2VlbiB0YXVsdWtrb29uLiBBcnZvamEgdm9pIGtvcGlvaWRhIHBhaWthc3RhIHRvaXNlZW4ga2xpa2thYW1hbGxhLjwvcD48b2wgY2xhc3M9XCJqc2F2Y29kZSBqc2F2Y2VudGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDUzMnB4O1wiPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPmRlZiBpbnNzb3J0c2hpZnQoQSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj4gIGZvciBpIGluIHJhbmdlKDEsIGxlbihBKSk6ICMgSW5zZXJ0IGkndGggcmVjb3JkPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICB0ZW1wID0gQVtpXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIGo9aTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgIHdoaWxlIChqICZndDsgMCkgYW5kICh0ZW1wICZsdDsgQVtqLTFdKTo8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZSBqc2F2aGlnaGxpZ2h0XCI+ICAgICAgQVtqXSA9IEFbai0xXTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICAgICAgaiAtPSAxPC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICBBW2pdID0gdGVtcDwvbGk+PC9vbD5cbiAgICA8cCBjbGFzcz1cImpzYXZleGVyY2lzZWNvbnRyb2xzXCIgYWxpZ249XCJjZW50ZXJcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJ1bmRvXCIgdmFsdWU9XCJLdW1vYVwiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cInJlc2V0XCIgdmFsdWU9XCJVdWRlbGxlZW5cIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJhbnN3ZXJcIiB2YWx1ZT1cIk1hbGxpdmFzdGF1c1wiPjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgbmFtZT1cImdyYWRlXCIgdmFsdWU9XCJBcnZvc3RlbGVcIj48c3BhbiBjbGFzcz1cImFjdGlvbkluZGljYXRvclwiIHN0eWxlPVwidG9wOiAtMS43cHg7IGxlZnQ6IDM5OC43NXB4O1wiPjwvc3Bhbj48L3A+XG4gICAgPHAgY2xhc3M9XCJqc2F2c2NvcmVcIj48L3A+XG4gIDxkaXYgY2xhc3M9XCJqc2F2Y2FudmFzXCIgc3R5bGU9XCJtaW4taGVpZ2h0OiAzMjUuN3B4OyBtaW4td2lkdGg6IDg0OXB4O1wiPjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiLTFcIj4tMTwvc3Bhbj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImpzYXZ2YXJpYWJsZVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YXJsYWJlbFwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsIGpzYXZ2YXJ2YWx1ZVwiIGRhdGEtdmFsdWU9XCItMVwiPi0xPC9zcGFuPjwvc3Bhbj48L2Rpdj48cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IC0xMHB4O1wiPkrkcmplc3RldHTkduQgdGF1bHVra288L3A+PG9sIGNsYXNzPVwianNhdmF1dG9yZXNpemUganNhdmNlbnRlciBqc2F2aW5kZXhlZCBqc2F2YXJyYXkganNhdmJhcmFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImJhclwiIGRhdGEtaW5kZXhlZD1cInRydWVcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlYmFyJnF1b3Q7Pjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0mcXVvdDtqc2F2aW5kZXhsYWJlbCZxdW90Oz57e2luZGV4fX08L3NwYW4+XCIgc3R5bGU9XCJ3aWR0aDogNDcxcHg7IHRyYW5zaXRpb246IHdpZHRoIDMwMG1zIGVhc2UgMHM7XCIgaWQ9XCJqc2F2LTIzNzA2NDJhZGY3MDQ2ZmY4OGQwOTQyMWQxNzE3M2VkXCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCIgc3R5bGU9XCJcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiA1NHB4OyB0cmFuc2l0aW9uOiBoZWlnaHQgMzAwbXMgZWFzZSAwcztcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJsZWZ0OiAwcHg7IGJvdHRvbTogMHB4OyB0cmFuc2l0aW9uOiBsZWZ0IDMwMG1zIGxpbmVhciAwcywgYm90dG9tIDMwMG1zIGxpbmVhciAwcztcIj40MTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjA8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDU4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwibGVmdDogMHB4OyBib3R0b206IDBweDtcIj40NDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjE8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIiBzdHlsZT1cIlwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cImxlZnQ6IDBweDsgYm90dG9tOiAwcHg7XCI+ODA8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4yPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzdweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mjg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj4zPC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTMwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjk5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDUwcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjM4PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+NTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDMycHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Njwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDE4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjE0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+Nzwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDExM3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj44Njwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjg8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzOHB4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yOTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjk8L3NwYW4+PC9saT48L29sPjxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogLTEwcHg7XCI+dGVtcC1tdXV0dHVqYTwvcD48b2wgY2xhc3M9XCJqc2F2YXV0b3Jlc2l6ZSBqc2F2Y2VudGVyIGpzYXZhcnJheSBqc2F2aG9yaXpvbnRhbGFycmF5XCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiIGRhdGEtYXV0b3Jlc2l6ZT1cInRydWVcIiBkYXRhLWNlbnRlcj1cInRydWVcIiBkYXRhLWxheW91dD1cImFycmF5XCIgZGF0YS1pbmRleGVkPVwiZmFsc2VcIiBkYXRhLXRlbXBsYXRlPVwiPHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+XCIgc3R5bGU9XCJoZWlnaHQ6IDQ3cHg7IHdpZHRoOiA0OHB4O1wiIGlkPVwianNhdi0yNmYwNzlmYTU1ZGE0MWI3YWU3NGJkMWU5YWQyNDU1MlwiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwidHJhbnNpdGlvbjogYWxsIDMwMG1zIGxpbmVhciAwcztcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiAwcHg7IGxlZnQ6IDBweDtcIj40MTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2c2h1dHRlclwiPjwvZGl2PiJ9LHsidHlwZSI6ImdyYWRlYWJsZS1zdGVwIiwidHN0YW1wIjoiMjAyMC0wNi0xMFQwNzo0NDoyMS4wMThaIiwiY3VycmVudFN0ZXAiOjcsImRhdGFTdHJ1Y3R1cmVzU3RhdGUiOlt7InR5cGUiOiJhcnJheSIsImlkIjoianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZCIsInZhbHVlcyI6WzQxLDQ0LDgwLDI4LDk5LDM4LDI0LDE0LDg2LDI5XX0seyJ0eXBlIjoiYXJyYXkiLCJpZCI6ImpzYXYtMjZmMDc5ZmE1NWRhNDFiN2FlNzRiZDFlOWFkMjQ1NTIiLCJ2YWx1ZXMiOls0MV19XSwiYW5pbWF0aW9uSFRNTCI6IlxuICAgIDxoMSBjbGFzcz1cImV4ZXJjaXNlVGl0bGVcIj5MaXPkeXNq5HJqZXN05G1pbmVuPC9oMT5cbiAgICA8cCBjbGFzcz1cImluc3RydWN0TGFiZWxcIj5PaGplZXQ6PC9wPlxuICAgIDxwIGNsYXNzPVwiaW5zdHJ1Y3Rpb25zXCI+U292ZWxsYSBsaXPkeXNq5HJqZXN05G1pc3TkIChpbnNlcnRpb24gc29ydCkgb2hlaXNlZW4gdGF1bHVra29vbi4gQXJ2b2phIHZvaSBrb3Bpb2lkYSBwYWlrYXN0YSB0b2lzZWVuIGtsaWtrYWFtYWxsYS48L3A+PG9sIGNsYXNzPVwianNhdmNvZGUganNhdmNlbnRlclwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiA1MzJweDtcIj48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmVcIj5kZWYgaW5zc29ydHNoaWZ0KEEpOjwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lXCI+ICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oQSkpOiAjIEluc2VydCBpJ3RoIHJlY29yZDwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgdGVtcCA9IEFbaV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICBqPWk8L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICB3aGlsZSAoaiAmZ3Q7IDApIGFuZCAodGVtcCAmbHQ7IEFbai0xXSk6PC9saT48bGkgY2xhc3M9XCJqc2F2Y29kZWxpbmUganNhdmhpZ2hsaWdodFwiPiAgICAgIEFbal0gPSBBW2otMV08L2xpPjxsaSBjbGFzcz1cImpzYXZjb2RlbGluZVwiPiAgICAgIGogLT0gMTwvbGk+PGxpIGNsYXNzPVwianNhdmNvZGVsaW5lIGpzYXZoaWdobGlnaHRcIj4gICAgQVtqXSA9IHRlbXA8L2xpPjwvb2w+XG4gICAgPHAgY2xhc3M9XCJqc2F2ZXhlcmNpc2Vjb250cm9sc1wiIGFsaWduPVwiY2VudGVyXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwidW5kb1wiIHZhbHVlPVwiS3Vtb2FcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJyZXNldFwiIHZhbHVlPVwiVXVkZWxsZWVuXCI+PGlucHV0IHR5cGU9XCJidXR0b25cIiBuYW1lPVwiYW5zd2VyXCIgdmFsdWU9XCJNYWxsaXZhc3RhdXNcIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIG5hbWU9XCJncmFkZVwiIHZhbHVlPVwiQXJ2b3N0ZWxlXCI+PHNwYW4gY2xhc3M9XCJhY3Rpb25JbmRpY2F0b3JcIiBzdHlsZT1cInRvcDogLTEuN3B4OyBsZWZ0OiAzOTguNzVweDtcIj48L3NwYW4+PC9wPlxuICAgIDxwIGNsYXNzPVwianNhdnNjb3JlXCI+PC9wPlxuICA8ZGl2IGNsYXNzPVwianNhdmNhbnZhc1wiIHN0eWxlPVwibWluLWhlaWdodDogMzI1LjdweDsgbWluLXdpZHRoOiA4NDlweDtcIj48ZGl2IGNsYXNzPVwianNhdnZhcmlhYmxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxzcGFuIGNsYXNzPVwianNhdnZhcmxhYmVsXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWwganNhdnZhcnZhbHVlXCIgZGF0YS12YWx1ZT1cIi0xXCI+LTE8L3NwYW4+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2dmFyaWFibGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFybGFiZWxcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbCBqc2F2dmFydmFsdWVcIiBkYXRhLXZhbHVlPVwiLTFcIj4tMTwvc3Bhbj48L3NwYW4+PC9kaXY+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj5K5HJqZXN0ZXR05HbkIHRhdWx1a2tvPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmluZGV4ZWQganNhdmFycmF5IGpzYXZiYXJhcnJheVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIiBkYXRhLWF1dG9yZXNpemU9XCJ0cnVlXCIgZGF0YS1jZW50ZXI9XCJ0cnVlXCIgZGF0YS1sYXlvdXQ9XCJiYXJcIiBkYXRhLWluZGV4ZWQ9XCJ0cnVlXCIgZGF0YS10ZW1wbGF0ZT1cIjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWJhciZxdW90Oz48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlJnF1b3Q7PjxzcGFuIGNsYXNzPSZxdW90O2pzYXZ2YWx1ZWxhYmVsJnF1b3Q7Pnt7dmFsdWV9fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdmluZGV4bGFiZWwmcXVvdDs+e3tpbmRleH19PC9zcGFuPlwiIHN0eWxlPVwid2lkdGg6IDQ3MXB4O1wiIGlkPVwianNhdi0yMzcwNjQyYWRmNzA0NmZmODhkMDk0MjFkMTcxNzNlZFwiPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTRweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJsZWZ0OiAwcHg7IGJvdHRvbTogMHB4O1wiPjQxPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MDwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCIgc3R5bGU9XCJsZWZ0OiAwcHg7IGJvdHRvbTogMHB4O1wiPjQ0PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+MTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiIHN0eWxlPVwiXCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTA1cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiIHN0eWxlPVwibGVmdDogMHB4OyBib3R0b206IDBweDtcIj44MDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjI8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAzN3B4O1wiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIj4yODwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2aW5kZXhsYWJlbFwiPjM8L3NwYW4+PC9saT48bGkgY2xhc3M9XCJqc2F2bm9kZSBqc2F2aW5kZXhcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWJhclwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiIHN0eWxlPVwiaGVpZ2h0OiAxMzBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+OTk8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj40PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogNTBweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+Mzg8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj41PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMzJweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MjQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj42PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMThweDtcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZWxhYmVsXCI+MTQ8L3NwYW4+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdmluZGV4bGFiZWxcIj43PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWViYXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVcIiBzdHlsZT1cImhlaWdodDogMTEzcHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjg2PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+ODwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImpzYXZub2RlIGpzYXZpbmRleFwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlYmFyXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlXCIgc3R5bGU9XCJoZWlnaHQ6IDM4cHg7XCI+PHNwYW4gY2xhc3M9XCJqc2F2dmFsdWVsYWJlbFwiPjI5PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImpzYXZpbmRleGxhYmVsXCI+OTwvc3Bhbj48L2xpPjwvb2w+PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAtMTBweDtcIj50ZW1wLW11dXR0dWphPC9wPjxvbCBjbGFzcz1cImpzYXZhdXRvcmVzaXplIGpzYXZjZW50ZXIganNhdmFycmF5IGpzYXZob3Jpem9udGFsYXJyYXlcIiBkYXRhLXZpc2libGU9XCJ0cnVlXCIgZGF0YS1hdXRvcmVzaXplPVwidHJ1ZVwiIGRhdGEtY2VudGVyPVwidHJ1ZVwiIGRhdGEtbGF5b3V0PVwiYXJyYXlcIiBkYXRhLWluZGV4ZWQ9XCJmYWxzZVwiIGRhdGEtdGVtcGxhdGU9XCI8c3BhbiBjbGFzcz0mcXVvdDtqc2F2dmFsdWUmcXVvdDs+PHNwYW4gY2xhc3M9JnF1b3Q7anNhdnZhbHVlbGFiZWwmcXVvdDs+e3t2YWx1ZX19PC9zcGFuPjwvc3Bhbj5cIiBzdHlsZT1cImhlaWdodDogNDdweDsgd2lkdGg6IDQ4cHg7XCIgaWQ9XCJqc2F2LTI2ZjA3OWZhNTVkYTQxYjdhZTc0YmQxZTlhZDI0NTUyXCI+PGxpIGNsYXNzPVwianNhdm5vZGUganNhdmluZGV4XCIgc3R5bGU9XCJcIj48c3BhbiBjbGFzcz1cImpzYXZ2YWx1ZVwiPjxzcGFuIGNsYXNzPVwianNhdnZhbHVlbGFiZWxcIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiAwcHg7IGxlZnQ6IDBweDtcIj40MTwvc3Bhbj48L3NwYW4+PC9saT48L29sPjwvZGl2PjxkaXYgY2xhc3M9XCJqc2F2c2h1dHRlclwiPjwvZGl2PiJ9LHsidHlwZSI6ImdyYWRlIiwidHN0YW1wIjoiMjAyMC0wNi0xMFQwNzo0NDoyMi41MTBaIiwiY3VycmVudFN0ZXAiOjcsInNjb3JlIjp7InRvdGFsIjo0NywiY29ycmVjdCI6NiwidW5kbyI6MCwiZml4IjowLCJzdHVkZW50Ijo2fX1dfQ=="));

</script>

</body>
<script src="../build/jsav-exercise-player-bundle.js"></script>
</html>
